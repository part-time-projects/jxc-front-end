{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\modules\\oss\\OSSFileList.vue?vue&type=style&index=0&id=2a957dd2&scoped=true&lang=css&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\modules\\oss\\OSSFileList.vue","mtime":1648374778130},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\css-loader\\index.js","mtime":1648364961250},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1648364957239},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\postcss-loader\\src\\index.js","mtime":1648365139501},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '~@assets/less/common.less';\n",{"version":3,"sources":["OSSFileList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA","file":"OSSFileList.vue","sourceRoot":"src/views/modules/oss","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <!-- 查询区域 -->\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\" @keyup.enter.native=\"searchQuery\">\r\n        <a-row :gutter=\"24\">\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"文件名称\">\r\n              <a-input placeholder=\"请输入文件名称\" v-model=\"queryParam.fileName\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"文件地址\">\r\n              <a-input placeholder=\"请输入文件地址\" v-model=\"queryParam.url\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n              <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </span>\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n\r\n    <!-- 操作按钮区域 -->\r\n    <div class=\"table-operator\">\r\n      <!--      <a-button type=\"primary\" icon=\"download\" @click=\"handleExportXls('文件列表')\">导出</a-button>-->\r\n      <a-upload\r\n          name=\"file\"\r\n          :multiple=\"false\"\r\n          :action=\"uploadAction\"\r\n          :headers=\"tokenHeader\"\r\n          :showUploadList=\"false\"\r\n          :beforeUpload=\"beforeUpload\"\r\n          @change=\"handleChange\">\r\n        <a-button>\r\n          <a-icon type=\"upload\"/>\r\n          OSS文件上传\r\n        </a-button>\r\n      </a-upload>\r\n\r\n      <a-upload\r\n        name=\"file\"\r\n        :multiple=\"false\"\r\n        :action=\"minioUploadAction\"\r\n        :headers=\"tokenHeader\"\r\n        :showUploadList=\"false\"\r\n        :beforeUpload=\"beforeUpload\"\r\n        @change=\"handleChange\">\r\n        <a-button>\r\n          <a-icon type=\"upload\"/>\r\n          MINIO文件上传\r\n        </a-button>\r\n      </a-upload>\r\n    </div>\r\n\r\n    <!-- table区域-begin -->\r\n    <div>\r\n      <div class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 16px;\">\r\n        <i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a\r\n          style=\"font-weight: 600\">{{\r\n        selectedRowKeys.length }}</a>项\r\n        <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\r\n      </div>\r\n\r\n      <a-table\r\n          ref=\"table\"\r\n          size=\"middle\"\r\n          bordered\r\n          rowKey=\"id\"\r\n          :columns=\"columns\"\r\n          :dataSource=\"dataSource\"\r\n          :pagination=\"ipagination\"\r\n          :loading=\"loading\"\r\n          :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n          @change=\"handleTableChange\">\r\n\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handlePreview(record)\">预览</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click=\"ossDelete(record.id)\">删除</a>\r\n        </span>\r\n\r\n      </a-table>\r\n    </div>\r\n    <!-- table区域-end -->\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\n\r\n  export default {\r\n    name: \"OSSFileList\",\r\n    mixins: [JeecgListMixin],\r\n    data() {\r\n      return {\r\n        description: '文件列表',\r\n        // 表头\r\n        columns: [\r\n          {\r\n            title: '#',\r\n            dataIndex: '',\r\n            key: 'rowIndex',\r\n            width: 60,\r\n            align: \"center\",\r\n            customRender: function (t, r, index) {\r\n              return parseInt(index) + 1;\r\n            }\r\n          },\r\n          {\r\n            title: '文件名称',\r\n            align: \"center\",\r\n            dataIndex: 'fileName'\r\n          },\r\n          {\r\n            title: '文件地址',\r\n            align: \"center\",\r\n            dataIndex: 'url'\r\n          },\r\n          {\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots: {customRender: 'action'},\r\n          }\r\n        ],\r\n        url: {\r\n          upload: \"/oss/file/upload\",\r\n          list: \"/oss/file/list\",\r\n          delete: \"/oss/file/delete\",\r\n          minioUpload: \"/sys/upload/uploadMinio\"\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      uploadAction() {\r\n        return window._CONFIG['domianURL'] + this.url.upload;\r\n      },\r\n      minioUploadAction() {\r\n        return window._CONFIG['domianURL'] + this.url.minioUpload;\r\n      },\r\n    },\r\n    methods: {\r\n      beforeUpload(file) {\r\n        var fileType = file.type;\r\n        if (fileType === 'image') {\r\n          if (fileType.indexOf('image') < 0) {\r\n            this.$message.warning('请上传图片');\r\n            return false;\r\n          }\r\n        } else if (fileType === 'file') {\r\n          if (fileType.indexOf('image') >= 0) {\r\n            this.$message.warning('请上传文件');\r\n            return false;\r\n          }\r\n        }\r\n        return true\r\n      },\r\n      handleChange(info) {\r\n        if (info.file.status === 'done') {\r\n          if (info.file.response.success) {\r\n            this.loadData()\r\n            this.$message.success(`${info.file.name} 上传成功!`);\r\n          } else {\r\n            this.$message.error(`${info.file.response.message}`);\r\n          }\r\n        } else if (info.file.status === 'error') {\r\n          this.$message.error(`${info.file.response.message}`);\r\n        }\r\n      },\r\n      ossDelete(id) {\r\n        var that = this;\r\n        that.$confirm({\r\n          title: \"确认删除\",\r\n          content: \"是否删除选中文件?\",\r\n          onOk: function () {\r\n            that.handleDelete(id)\r\n          }\r\n        });\r\n      },\r\n      handlePreview(record) {\r\n        if (record && record.url) {\r\n          let url = window._CONFIG['onlinePreviewDomainURL'] + '?url=' + encodeURIComponent(record.url)\r\n          window.open(url, '_blank')\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  @import '~@assets/less/common.less';\r\n</style>\r\n"]}]}