{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\components\\ListColumnsSetter.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\components\\ListColumnsSetter.vue","mtime":1648374777613},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1648365139913},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Vue from \"vue\";\n\nexport default {\n  name: \"ListColumnsSetter\",\n\n  props: {\n    columns:{\n      type:Array,\n      required: true\n    },\n    defColumns:{\n      type:Array,\n      required: true\n    },\n    ignoreColumns:{\n      type: Array,\n      default: () => ['rowIndex', 'action', 'flag']\n    },\n    listName:{\n      type:String,\n      default: '',\n    }\n  },\n\n  model: {\n    prop: 'columns',\n    event: 'change'\n  },\n\n  data() {\n    return {\n      defColumns_: [],\n      settingColumns:[]\n    }\n  },\n\n  computed: {\n    ls_key() { return this.$route.name + '/' + this.listName + ':colsettings'},\n  },\n\n  mounted() {\n    this.defColumns_.push(...this.defColumns);\n    this.initColumns();\n  },\n\n  methods: {\n    initColumns(){\n      //权限过滤（列权限控制时打开，修改第二个参数为授权码前缀）\n      //this.defColumns_ = colAuthFilter(this.defColumns_,'testdemo:');\n\n      let colSettings = Vue.ls.get(this.ls_key);\n      let columns = [];\n      if(colSettings===null||colSettings===undefined){\n        let allSettingColumns = [];\n        this.defColumns_.forEach(function (item,i,array ) {\n          allSettingColumns.push(item.dataIndex);\n        })\n        this.settingColumns = allSettingColumns;\n        columns = this.defColumns_;\n      } else {\n        this.settingColumns = colSettings;\n        columns = this.defColumns_.filter(item => {\n          if(this.ignoreColumns.includes(item.key) || this.ignoreColumns.includes(item.dataIndex)){\n            return true;\n          }\n          if (colSettings.includes(item.dataIndex)) {\n            return true;\n          }\n          return false;\n        })\n      }\n      this.$emit('change', columns);\n    },\n\n    //列设置更改事件\n    onColSettingsChange (checkedValues) {\n      Vue.ls.set(this.ls_key, checkedValues, 7*24*60*60*1000)\n      this.settingColumns = checkedValues;\n      const columns = this.defColumns_.filter(item => {\n        if(this.ignoreColumns.includes(item.key) || this.ignoreColumns.includes(item.dataIndex)){\n          return true\n        }\n        if (this.settingColumns.includes(item.dataIndex)) {\n          return true\n        }\n        return false\n      })\n      this.$emit('change', columns);\n    },\n  },\n\n}\n",null]}