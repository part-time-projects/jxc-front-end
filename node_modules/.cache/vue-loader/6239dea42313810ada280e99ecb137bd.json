{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\finance\\modules\\PurPaymentModal.vue?vue&type=style&index=0&id=2de021c1&lang=less&scoped=true&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\finance\\modules\\PurPaymentModal.vue","mtime":1648374777627},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\css-loader\\index.js","mtime":1648364961250},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1648364957239},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\postcss-loader\\src\\index.js","mtime":1648365139501},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\less-loader\\dist\\cjs.js","mtime":1648365206449},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.ant-row.ant-form-item {\n  margin-bottom: 12px;\n}\n",{"version":3,"sources":["PurPaymentModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+ZA;AACA;AACA","file":"PurPaymentModal.vue","sourceRoot":"src/views/erp/finance/modules","sourcesContent":["<template>\r\n  <j-modal\r\n    :title=\"'采购付款 - ' + title\"\r\n    :width=\"width\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    :maskClosable=\"false\"\r\n    :keyboard=\"false\"\r\n    :forceRender=\"true\"\r\n    switchFullscreen\r\n    @cancel=\"handleCancel\">\r\n\r\n    <template slot=\"footer\">\r\n      <a-button v-if=\"action!=='detail'\" key=\"cancel\" @click=\"handleCancel\">取消</a-button>\r\n      <a-button v-if=\"!readOnly\" key=\"save\"   @click=\"handleSave\" type=\"primary\" :loading=\"confirmLoading\">保存</a-button>\r\n      <a-button v-if=\"!readOnly\" key=\"submit\" @click=\"handleSubmit\" type=\"primary\" :loading=\"confirmLoading\">提交</a-button>\r\n      <a-button v-if=\"action==='detail'\"  key=\"close\"  @click=\"handleCancel\" type=\"primary\">关闭</a-button>\r\n      <a-button v-if=\"action==='approve'\"  key=\"approved\"  @click=\"handleApproved\" type=\"primary\">审核通过</a-button>\r\n    </template>\r\n\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <!-- 主表单区域 -->\r\n      <a-form :form=\"form\">\r\n        <a-row>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"处理状态\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['billProcStatus', validatorRules.billProcStatus]\" :trigger-change=\"true\" dictCode=\"x_bill_proc_status\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"4\">\r\n            <a-form-item label=\"是否通过\" :labelCol=\"spans.labelCol6\" :wrapperCol=\"spans.wrapperCol6\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['isApproved', validatorRules.isApproved]\" :trigger-change=\"true\" dictCode=\"yn\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"4\">\r\n            <a-form-item label=\"是否关闭\" :labelCol=\"spans.labelCol6\" :wrapperCol=\"spans.wrapperCol6\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['isClosed', validatorRules.isClosed]\" :trigger-change=\"true\" dictCode=\"yn\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"4\">\r\n            <a-form-item label=\"是否作废\" :labelCol=\"spans.labelCol6\" :wrapperCol=\"spans.wrapperCol6\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['isVoided', validatorRules.isVoided]\" :trigger-change=\"true\" dictCode=\"yn\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"4\">\r\n            <a @click=\"()=> this.moreStatus = !this.moreStatus\" style=\"float: right; margin-top: 10px\">\r\n              {{ moreStatus ? '收起' : '展开' }}\r\n              <a-icon :type=\"moreStatus ? 'up' : 'down'\"/>\r\n            </a>\r\n          </a-col>\r\n        </a-row>\r\n        <a-row v-show=\"moreStatus\">\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"创建时间\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-date :readOnly=\"true\" v-decorator=\"[ 'createTime', validatorRules.createTime]\" :trigger-change=\"true\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"创建人\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['createBy', validatorRules.createBy]\" :trigger-change=\"true\" dictCode=\"sys_user,realname,username\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"创建部门\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['sysOrgCode', validatorRules.sysOrgCode]\" :trigger-change=\"true\" dictCode=\"sys_depart,depart_name,org_code\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"生效时间\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-date :readOnly=\"true\" v-decorator=\"[ 'effectiveTime', validatorRules.effectiveTime]\" :showTime=\"true\" :trigger-change=\"true\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"审核人\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['approverId', validatorRules.approverId]\" :trigger-change=\"true\" dictCode=\"sys_user,realname,username\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"流程\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <a-input :readOnly=\"true\" v-decorator=\"[ 'flowId', validatorRules.flowId]\" ></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"修改时间\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-date :readOnly=\"true\" v-decorator=\"[ 'updateTime', validatorRules.updateTime]\" :trigger-change=\"true\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"修改人\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['updateBy', validatorRules.updateBy]\" :trigger-change=\"true\" dictCode=\"sys_user,realname,username\" />\r\n            </a-form-item>\r\n          </a-col>\r\n        </a-row>\r\n        <a-row>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"单据编号\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <a-input :readOnly=\"true\" v-decorator=\"[ 'billNo', validatorRules.billNo]\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"单据日期\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-date :readOnly=\"readOnly\" v-decorator=\"[ 'billDate', validatorRules.billDate]\" :trigger-change=\"true\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item  label=\"制单人\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled  type=\"list\" v-decorator=\"['createBy', validatorRules.createBy]\" :trigger-change=\"true\" dictCode=\"sys_user,realname,username\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"供应商\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag :disabled=\"readOnly\" type=\"list\" v-decorator=\"['supplierId', validatorRules.supplierId]\" :trigger-change=\"true\" dictCode=\"bas_supplier,name,id\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"是否红字\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag :disabled=\"readOnly\" type=\"list\" v-decorator=\"['isRubric', validatorRules.isRubric]\" :trigger-change=\"true\" dictCode=\"yn\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"金额\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <a-input-number disabled v-decorator=\"['amt', validatorRules.amt]\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\" v-show=\"action==='detail' && model.paymentType === '201'\">\r\n            <a-form-item label=\"已抵扣预付\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <a-input-number disabled v-decorator=\"['deductedAmt', validatorRules.deductedAmt]\"  style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\" v-show=\"action==='detail'\">\r\n            <a-form-item label=\"已核销金额\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <a-input-number disabled v-decorator=\"['checkedAmt', validatorRules.checkedAmt]\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n        </a-row>\r\n        <a-row>\r\n          <a-col :span=\"24\">\r\n            <a-form-item label=\"备注\" :labelCol=\"spans.labelCol1\" :wrapperCol=\"spans.wrapperCol1\">\r\n              <a-textarea :readOnly=\"readOnly\" v-decorator=\"['remark', validatorRules.remark]\" rows=\"1\" autoSize></a-textarea>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"24\">\r\n            <a-form-item label=\"附件\" :labelCol=\"spans.labelCol1\" :wrapperCol=\"spans.wrapperCol1\">\r\n              <j-upload :disabled=\"readOnly\" v-decorator=\"['attachment', validatorRules.attachment]\" :trigger-change=\"true\"></j-upload>\r\n            </a-form-item>\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n\r\n      <!-- 子表单区域 -->\r\n      <a-tabs v-model=\"activeKey\" @change=\"handleChangeTabs\">\r\n        <a-tab-pane tab=\"付款明细\" :key=\"refKeys[0]\" :forceRender=\"true\">\r\n          <j-editable-table\r\n            :disabled=\"readOnly\"\r\n            :ref=\"refKeys[0]\"\r\n            :loading=\"finPaymentEntryTable.loading\"\r\n            :columns=\"finPaymentEntryTable.columns\"\r\n            :dataSource=\"finPaymentEntryTable.dataSource\"\r\n            :maxHeight=\"300\"\r\n            :rowNumber=\"false\"\r\n            :rowSelection=\"true\"\r\n            :actionButton=\"!readOnly\"\r\n            @added=\"onEntryAdded\"\r\n            @deleted=\"onEntryDeleted\"\r\n            @valueChange=\"onValueChange\">\r\n          </j-editable-table>\r\n        </a-tab-pane>\r\n      </a-tabs>\r\n\r\n    </a-spin>\r\n  </j-modal>\r\n</template>\r\n\r\n<script>\r\n\r\n  import pick from 'lodash.pick'\r\n  import { FormTypes,getRefPromise,VALIDATE_NO_PASSED, validateFormAndTables } from '@/utils/JEditableTableUtil'\r\n  import { JEditableTableMixin } from '@/mixins/JEditableTableMixin'\r\n  import JDate from '@/components/jeecg/JDate'\r\n  import JUpload from '@/components/jeecg/JUpload'\r\n  import JDictSelectTag from \"@/components/dict/JDictSelectTag\"\r\n  import { putAction } from '@api/manage'\r\n  import { billModalMixin } from '../../mixins/billModalMixin'\r\n  import { getFormatDate } from '../../utils/util'\r\n  import { validateEntryNo, validateByIsRubric } from '../../utils/editableTableValidate'\r\n\r\n  export default {\r\n    name: 'PurPaymentModal',\r\n    mixins: [JEditableTableMixin, billModalMixin],\r\n    components: {\r\n      JDate,\r\n      JUpload,\r\n      JDictSelectTag,\r\n    },\r\n    data() {\r\n      return {\r\n        width: '1200px',\r\n        moreStatus: false,\r\n\r\n        // 新增时子表默认添加几行空数据\r\n        addDefaultRowNum: 1,\r\n        validatorRules: {\r\n          billNo: {rules: [\r\n            {required: true, message: '请输入单据编号!'},\r\n          ]},\r\n          billDate: {rules: [\r\n            {required: true, message: '请输入单据日期!'},\r\n          ]},\r\n          supplierId: {rules: [\r\n            {required: true, message: '请选择供应商!'},\r\n          ]},\r\n          amt: {rules: []},\r\n          deductedAmt: {rules: []},\r\n          checkedAmt: {rules: []},\r\n          attachment: {rules: []},\r\n          remark: {rules: []},\r\n          billProcStatus: {rules: []},\r\n          isApproved: {rules: []},\r\n          isClosed: {rules: []},\r\n          isVoided: {rules: []},\r\n          effectiveTime: {rules: []},\r\n          approverId: {rules: []},\r\n          flowId: {rules: []},\r\n          createTime: {rules: []},\r\n          createBy: {rules: []},\r\n          sysOrgCode: {rules: []},\r\n          updateTime: {rules: []},\r\n          updateBy: {rules: []},\r\n        },\r\n        refKeys: ['finPaymentEntry', ],\r\n        tableKeys:['finPaymentEntry', ],\r\n        activeKey: 'finPaymentEntry',\r\n        // 付款明细\r\n        finPaymentEntryTable: {\r\n          loading: false,\r\n          dataSource: [],\r\n          columns: [\r\n            {\r\n              title: '分录号',\r\n              key: 'entryNo',\r\n              type: FormTypes.inputNumber,\r\n              width:\"60px\",\r\n              placeholder: '请输入${title}',\r\n              defaultValue: '',\r\n              validateRules: [\r\n                { required: true, message: '${title}不能为空' },\r\n                { pattern: /^[1-9]\\d*$/, message: '请输入零以上的正整数' },\r\n                { handler: validateEntryNo}\r\n              ],\r\n            },\r\n            {//sourceType、sourceEntry、sourceEntryNo应一起考虑\r\n              title: '源单分录号',\r\n              key: 'sourceEntryNo',\r\n              type: FormTypes.input,\r\n              width:\"180px\",\r\n              defaultValue: '',\r\n            },\r\n            {\r\n              title: '结算方式',\r\n              key: 'settleMethod',\r\n              type: FormTypes.select,\r\n              dictCode:\"x_settle_method\",\r\n              width:\"150px\",\r\n              defaultValue: '',\r\n              options:[],\r\n              validateRules: [{ required: true, message: '${title}不能为空' }],\r\n           },\r\n            {\r\n              title: '资金账户',\r\n              key: 'bankAccountId',\r\n              type: FormTypes.select,\r\n              dictCode:\"bas_bank_account,account_no,id\",\r\n              width:\"260px\",\r\n              defaultValue: '',\r\n              options:[],\r\n            },\r\n            {\r\n              title: '金额',\r\n              key: 'amt',\r\n              type: FormTypes.inputNumber,\r\n              width:\"120px\",\r\n              defaultValue: '',\r\n              validateRules: [\r\n                { required: true, message: '${title}不能为空' },\r\n                { handler: validateByIsRubric}\r\n              ],\r\n            },\r\n            {\r\n              title: '备注',\r\n              key: 'remark',\r\n              type: FormTypes.input,\r\n              width:\"200px\",\r\n              defaultValue: '',\r\n            },\r\n            {\r\n              title: '备注2',\r\n              key: 'remark2',\r\n              type: FormTypes.input,\r\n              width:\"200px\",\r\n              defaultValue: '',\r\n            },\r\n            {\r\n              title: '备注3',\r\n              key: 'remark3',\r\n              type: FormTypes.input,\r\n              width:\"200px\",\r\n              defaultValue: '',\r\n            },\r\n          ]\r\n        },\r\n        url: {\r\n          add: \"/finance/finPayment/add\",\r\n          edit: \"/finance/finPayment/edit\",\r\n          approve: \"/finance/finPayment/approve\",\r\n          finPaymentEntry: {\r\n            list: '/finance/finPayment/queryFinPaymentEntryByMainId'\r\n          },\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      getAllTable() {\r\n        let values = this.tableKeys.map(key => getRefPromise(this, key))\r\n        return Promise.all(values)\r\n      },\r\n\r\n      addInit() {\r\n        //采购付款\r\n        this.model.paymentType = '202'\r\n        this.model.isRubric = 0;\r\n        //处理状态：编辑中\r\n        this.model.billProcStatus = '12'\r\n        this.model.amt = 0;\r\n        this.model.deductedAmt = 0;\r\n        this.model.checkedAmt = 0;\r\n\r\n        // 请求后台的填值规则接口地址\r\n        const url = '/sys/fillRule/executeRuleByCode/'\r\n        const ruleCode = 'payment_bill_no'\r\n        const that = this\r\n        putAction(url + ruleCode, {}).then(res => {\r\n          // 执行成功，获取返回的值，并赋到页面上\r\n          if (res.success) {\r\n            that.$nextTick(() => {\r\n              that.form.setFieldsValue({'billNo':res.result, 'billDate':getFormatDate()})\r\n            })\r\n          }\r\n        })\r\n      },\r\n\r\n      /** 调用完edit()方法之后会自动调用此方法 */\r\n      editAfter() {\r\n        if (this.action === 'add') {\r\n          this.addInit()\r\n        }\r\n\r\n        let fieldval = pick(this.model,'billNo','billDate','supplierId','isRubric','amt','deductedAmt','checkedAmt','attachment','remark','billProcStatus','isApproved','isClosed','isVoided','effectiveTime','approverId','flowId','createTime','createBy','sysOrgCode','updateTime','updateBy')\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(fieldval)\r\n        })\r\n        // 加载子表数据\r\n        if (this.model.id) {\r\n          let params = { id: this.model.id }\r\n          this.requestSubTableData(this.url.finPaymentEntry.list, params, this.finPaymentEntryTable)\r\n        }\r\n      },\r\n      /** 整理成formData */\r\n      classifyIntoFormData(allValues) {\r\n        let main = Object.assign(this.model, allValues.formValue)\r\n\r\n        return {\r\n          ...main, // 展开\r\n          finPaymentEntryList: allValues.tablesValue[0].values,\r\n        }\r\n      },\r\n      validateError(msg){\r\n        this.$message.error(msg)\r\n      },\r\n      popupCallback(row){\r\n        this.form.setFieldsValue(pick(row,'billNo','billDate','supplierId','isRubric','amt','deductedAmt','checkedAmt','attachment','remark','billProcStatus','isApproved','isClosed','isVoided','effectiveTime','approverId','flowId','createTime','createBy','sysOrgCode','updateTime','updateBy'))\r\n      },\r\n\r\n      onEntryDeleted(deleteIds) {\r\n        this.calcTotalAmt();\r\n      },\r\n\r\n      //单元值改变一个字符就触发一次\r\n      onValueChange(event) {\r\n        const { type, row, column, value, target } = event\r\n        if (column.key === \"amt\") {\r\n          this.calcTotalAmt();\r\n        }\r\n      },\r\n      calcTotalAmt() {\r\n        let { error, values } = this.$refs.finPaymentEntry.getValuesSync({ validate: false})\r\n        let total = 0;\r\n        for (let v of values) {\r\n          let amt = Number(v['amt'])\r\n          if (!isNaN(amt)) {\r\n            total += amt;\r\n          }\r\n        }\r\n\r\n        const that = this;\r\n        that.$nextTick(() => {\r\n          that.form.setFieldsValue({'amt':total})\r\n        })\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .ant-row.ant-form-item {\r\n    margin-bottom: 12px;\r\n  }\r\n</style>\r\n"]}]}