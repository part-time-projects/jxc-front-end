{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\system\\modules\\AddressListRight.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\system\\modules\\AddressListRight.vue","mtime":1648374778147},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\css-loader\\index.js","mtime":1648364961250},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1648364957239},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\postcss-loader\\src\\index.js","mtime":1648365139501},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.j-address-list-right-card-box .ant-table-placeholder {\n  min-height: 46px;\n}\n",{"version":3,"sources":["AddressListRight.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA","file":"AddressListRight.vue","sourceRoot":"src/views/system/modules","sourcesContent":["<template>\r\n  <a-card class=\"j-address-list-right-card-box\" :loading=\"cardLoading\" :bordered=\"false\">\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\">\r\n        <a-row :gutter=\"10\">\r\n\r\n          <a-col :md=\"6\" :sm=\"12\">\r\n            <a-form-item label=\"姓名\" style=\"margin-left:8px\">\r\n              <a-input placeholder=\"请输入姓名查询\" v-model=\"queryParam.realname\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n\r\n\r\n          <a-col :md=\"6\" :sm=\"12\">\r\n            <a-form-item label=\"工号\" style=\"margin-left:8px\">\r\n              <a-input placeholder=\"请输入工号查询\" v-model=\"queryParam.workNo\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n\r\n          <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n            <a-col :md=\"6\" :sm=\"24\">\r\n             <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\" style=\"margin-left: 18px\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </a-col>\r\n          </span>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n\r\n    <a-table\r\n      ref=\"table\"\r\n      size=\"middle\"\r\n      bordered\r\n      rowKey=\"userId\"\r\n      :pagination=\"ipagination\"\r\n      :columns=\"columns\"\r\n      :dataSource=\"dataSource\"\r\n      :loading=\"loading\"\r\n      @change=\"handleTableChange\">\r\n    </a-table>\r\n\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import { getAction } from '@/api/manage'\r\n  import { JeecgListMixin } from '@/mixins/JeecgListMixin'\r\n\r\n  export default {\r\n    name: 'AddressListRight',\r\n    mixins: [JeecgListMixin],\r\n    components: {},\r\n    props: ['value'],\r\n    data() {\r\n      return {\r\n        description: '用户信息',\r\n        cardLoading: true,\r\n        positionInfo: {},\r\n        columns: [\r\n          {\r\n            title: '#',\r\n            key: 'rowIndex',\r\n            dataIndex: '',\r\n            width: 60,\r\n            align: 'center',\r\n            customRender: (t, r, i) => parseInt(i) + 1\r\n          },\r\n          {\r\n            title: '姓名',\r\n            width: '15%',\r\n            align: 'center',\r\n            dataIndex: 'realname'\r\n          },\r\n          {\r\n            title: '工号',\r\n            width: '15%',\r\n            align: 'center',\r\n            dataIndex: 'workNo'\r\n          },\r\n          {\r\n            title: '部门',\r\n            width: '20%',\r\n            align: 'center',\r\n            dataIndex: 'departName'\r\n          },\r\n          {\r\n            title: '职务',\r\n            width: '15%',\r\n            align: 'center',\r\n            dataIndex: 'post',\r\n            customRender: (text) => (text || '').split(',').map(t => this.positionInfo[t] ? this.positionInfo[t] : t).join(',')\r\n          },\r\n          {\r\n            title: '手机',\r\n            width: '15%',\r\n            align: 'center',\r\n            dataIndex: 'telephone'\r\n          },\r\n          // {\r\n          //   title: '手机号',\r\n          //   width: '12%',\r\n          //   align: 'center',\r\n          //   dataIndex: 'phone'\r\n          // },\r\n          {\r\n            title: '公司邮箱',\r\n            width: '15%',\r\n            align: 'center',\r\n            dataIndex: 'email'\r\n          }\r\n        ],\r\n        url: {\r\n          list: '/sys/user/queryByOrgCodeForAddressList',\r\n          listByPosition: '/sys/position/list'\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      value: {\r\n        immediate: true,\r\n        handler(orgCode) {\r\n          this.dataSource = []\r\n          this.loadData(1, orgCode)\r\n        }\r\n      },\r\n    },\r\n    created() {\r\n      this.queryPositionInfo()\r\n    },\r\n    methods: {\r\n\r\n      loadData(pageNum, orgCode) {\r\n        this.loading = true\r\n        if (pageNum === 1) {\r\n            this.ipagination.current = 1\r\n        }\r\n        // update-begin- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\r\n        if (!orgCode) {\r\n            getAction(this.url.list, {\r\n                ...this.getQueryParams()\r\n            }).then((res) => {\r\n                if (res.success) {\r\n                    this.dataSource = res.result.records\r\n                    this.ipagination.total = res.result.total\r\n                }\r\n            }).finally(() => {\r\n                this.loading = false\r\n                this.cardLoading = false\r\n            })\r\n          // update-end- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\r\n        }else{\r\n        //加载数据 若传入参数1则加载第一页的内容\r\n        getAction(this.url.list, {\r\n          orgCode,\r\n          ...this.getQueryParams()\r\n        }).then((res) => {\r\n          if (res.success) {\r\n            this.dataSource = res.result.records\r\n            this.ipagination.total = res.result.total\r\n          }\r\n        }).finally(() => {\r\n          this.loading = false\r\n          this.cardLoading = false\r\n        })\r\n        }\r\n      },\r\n\r\n      searchQuery() {\r\n        this.loadData(1, this.value)\r\n      },\r\n      searchReset() {\r\n        this.queryParam = {}\r\n        this.loadData(1, this.value)\r\n      },\r\n\r\n      handleTableChange(pagination, filters, sorter) {\r\n        if (Object.keys(sorter).length > 0) {\r\n          this.isorter.column = sorter.field\r\n          this.isorter.order = 'ascend' === sorter.order ? 'asc' : 'desc'\r\n        }\r\n        this.ipagination = pagination\r\n        this.loadData(null, this.value)\r\n      },\r\n\r\n      // 查询职务信息\r\n      queryPositionInfo() {\r\n        getAction(this.url.listByPosition, { pageSize: 99999 }).then(res => {\r\n          if (res.success) {\r\n            let positionInfo = {}\r\n            res.result.records.forEach(record => {\r\n              positionInfo[record['code']] = record['name']\r\n            })\r\n            this.positionInfo = positionInfo\r\n          }\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n  .j-address-list-right-card-box .ant-table-placeholder {\r\n    min-height: 46px;\r\n  }\r\n</style>\r\n<style scoped>\r\n  .j-address-list-right-card-box {\r\n    height: 100%;\r\n    min-height: 300px;\r\n  }\r\n</style>"]}]}