{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\finance\\modules\\RpCheck\\RpCheckEntryList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\finance\\modules\\RpCheck\\RpCheckEntryList.vue","mtime":1648374777629},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1648365139913},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin'\n\nexport default {\n  name: \"RpCheckEntryList\",\n  mixins:[JeecgListMixin],\n  components: {  },\n  props: {\n    // 核销类型:\n    checkType: {\n      type: String,\n      default: \"\"\n    },\n    // 核销方向: 1-应收应付， 2-收款付款\n    checkSide: {\n      type: String,\n      default: \"\"\n    },\n    readOnly: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data () {\n    return {\n      disableMixinCreated:true,\n      // 表头\n      columns: [\n        {\n          title:'分录号',\n          width:90,\n          align:\"center\",\n          dataIndex: 'entryNo',\n          type: \"Number\",\n          sorter: (a, b) => a.entryNo - b.entryNo,\n          defaultSortOrder:'ascend'\n        },\n        {\n          title:'单据号',\n          width:180,\n          align:\"center\",\n          dataIndex: 'sourceNo'\n        },\n        {\n          title:'未核销金额',\n          width:120,\n          align:\"center\",\n          dataIndex: 'uncheckedAmt',\n        },\n        {\n          title:'核销金额',\n          width:120,\n          align:\"center\",\n          dataIndex: 'amt',\n          type: \"Number\",\n          scopedSlots: { customRender: 'amt' },\n        },\n        {\n          title:'备注',\n          align:\"center\",\n          dataIndex: 'remark',\n          scopedSlots: { customRender: 'remark' },\n        },\n      ],\n      dictOptions:{\n       billType:[],\n      },\n      totalAmt: 0,\n    }\n  },\n  computed: {\n    title: function() {\n      if (this.checkType === \"201\")\n        return this.checkSide===\"1\" ? \"应付\" : (this.checkSide===\"2\" ? \"付款\":\"\");\n    }\n  },\n\n  watch:{\n    dataSource: function () {\n      this.calcTotalAmt();\n      this.$emit(\"dataSourceChange\");\n    },\n    totalAmt: function () {\n      this.$emit(\"totalAmtChange\", this.totalAmt);\n    },\n\n  },\n\n  methods: {\n    resetTable() {\n      this.dataSource = [];\n      this.selectedRowKeys = [];\n      this.selectionRows = [];\n    },\n\n    onMySelectChange(selectedRowKeys, selectionRows) {\n      this.onSelectChange(selectedRowKeys, selectionRows);\n      this.$emit(\"selectChange\");\n    },\n\n    calcTotalAmt() {\n      let total = 0;\n      for (let record of this.dataSource) {\n        let amt = Number(record.amt)\n        if (!isNaN(amt)) {\n          total += amt;\n        }\n      }\n      this.totalAmt = total;\n    },\n\n    handleCellChange(value, record, column) {\n      record[column.dataIndex] = value;\n      //触发dataSourceChange和刷新table\n      this.dataSource = [...this.dataSource];\n    },\n  }\n}\n",null]}