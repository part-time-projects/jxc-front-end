{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\modules\\monitor\\HttpTrace.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\modules\\monitor\\HttpTrace.vue","mtime":1648374778120},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1648365139913},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport moment from 'moment'\nimport { getAction } from '@/api/manage'\n\nmoment.locale('zh-cn')\n\nexport default {\n  data() {\n    return {\n      advanced: false,\n      dataSource: [],\n      pagination: {\n        defaultPageSize: 10,\n        defaultCurrent: 1,\n        pageSizeOptions: ['10', '20', '30', '40', '100'],\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\n      },\n      loading: true,\n      tableLoading: true\n    }\n  },\n  computed: {\n    columns() {\n      return [{\n        title: '请求时间',\n        dataIndex: 'timestamp',\n        customRender(text) {\n          return moment(text).format('YYYY-MM-DD HH:mm:ss')\n        }\n      }, {\n        title: '请求方法',\n        dataIndex: 'request.method',\n        scopedSlots: { customRender: 'requestMethod' },\n        filters: [\n          { text: 'GET', value: 'GET' },\n          { text: 'POST', value: 'POST' },\n          { text: 'PUT', value: 'PUT' },\n          { text: 'DELETE', value: 'DELETE' }\n        ],\n        filterMultiple: true,\n        onFilter: (value, record) => record.request.method.includes(value)\n      }, {\n        title: '请求URL',\n        dataIndex: 'request.uri',\n        customRender(text) {\n          return text.split('?')[0]\n        }\n      }, {\n        title: '响应状态',\n        dataIndex: 'response.status',\n        scopedSlots: { customRender: 'responseStatus' }\n      }, {\n        title: '请求耗时',\n        dataIndex: 'timeTaken',\n        scopedSlots: { customRender: 'timeTaken' }\n      }]\n    }\n  },\n  mounted() {\n    this.fetch()\n  },\n  methods: {\n\n    handleClickUpdate() {\n      this.fetch()\n    },\n\n    handleTableChange() {\n      this.fetch()\n    },\n\n    fetch() {\n      this.tableLoading = true\n      getAction('actuator/httptrace').then((data) => {\n        let filterData = []\n        for (let d of data.traces) {\n          if (d.request.method !== 'OPTIONS' && d.request.uri.indexOf('httptrace') === -1) {\n            filterData.push(d)\n          }\n        }\n        this.dataSource = filterData\n      }).catch((e) => {\n        console.error(e)\n        this.$message.error('获取HTTP信息失败')\n      }).finally(() => {\n        this.loading = false\n        this.tableLoading = false\n      })\n    }\n\n  }\n}\n",null]}