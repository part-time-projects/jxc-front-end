{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3c1fad20\",\"chunk-2d0bdf09\",\"chunk-2d0bdf09\",\"chunk-2d0bdf09\",\"chunk-2d0bdf09\",\"chunk-2d0bdf09\",\"chunk-0affd386\",\"chunk-2d0bdf09\",\"chunk-2d0bdf09\",\"chunk-2d0bdf09\",\"chunk-4e1d1b7c\",\"chunk-2d0bdf09\"],{\"2dab\":function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"a-date-picker\",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},a=[],i=r(\"c1df\"),o=r.n(i),s={name:\"JDate\",props:{placeholder:{type:String,default:\"\",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:\"YYYY-MM-DD\",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:\"\",momVal:e?o()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?o()(e,this.dateFormat):null}},methods:{moment:o.a,handleDateChange:function(e,t){this.$emit(\"change\",t)}},model:{prop:\"value\",event:\"change\"}},l=s,c=r(\"2877\"),u=Object(c[\"a\"])(l,n,a,!1,null,null,null);t[\"default\"]=u.exports},\"5de1\":function(e,t,r){\"use strict\";var n=r(\"ce6e\"),a=r.n(n);a.a},\"74c6\":function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"a-modal\",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:\"关闭\"},on:{ok:e.handleOk,cancel:e.handleCancel}},[r(\"a-spin\",{attrs:{spinning:e.confirmLoading}},[r(\"a-form\",{attrs:{form:e.form}},[r(\"a-form-item\",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:\"用户名\"}},[r(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"userName\",{}],expression:\"['userName', {}]\"}],attrs:{placeholder:\"请输入用户名\",readOnly:\"\"}})],1),r(\"a-form-item\",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:\"代理人用户名\"}},[r(\"j-select-user-by-dep\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"agentUserName\",e.validatorRules.agentUserName],expression:\"['agentUserName', validatorRules.agentUserName]\"}],attrs:{placeholder:\"请输入代理人用户名\",\"trigger-change\":!0}})],1),r(\"a-form-item\",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:\"代理开始时间\"}},[r(\"j-date\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"startTime\",e.validatorRules.startTime],expression:\"[ 'startTime', validatorRules.startTime]\"}],staticStyle:{width:\"100%\"},attrs:{\"trigger-change\":!0,showTime:!0,\"date-format\":\"YYYY-MM-DD HH:mm:ss\",placeholder:\"请选择开始时间\"}})],1),r(\"a-form-item\",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:\"代理结束时间\"}},[r(\"j-date\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"endTime\",e.validatorRules.endTime],expression:\"[ 'endTime', validatorRules.endTime]\"}],staticStyle:{width:\"100%\"},attrs:{\"trigger-change\":!0,showTime:!0,\"date-format\":\"YYYY-MM-DD HH:mm:ss\",placeholder:\"请选择结束时间\"}})],1),r(\"a-form-item\",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:\"状态\"}},[r(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"status\",{}],expression:\"[ 'status', {}]\"}],staticClass:\"fontiframe\",attrs:{name:\"radioGroup\"}},[r(\"a-radio\",{staticClass:\"radioGroup\",attrs:{value:\"1\"}},[e._v(\"有效\")]),r(\"a-radio\",{staticClass:\"radioGroup\",attrs:{value:\"0\"}},[e._v(\"无效\")])],1)],1)],1)],1)],1)},a=[],i=r(\"88bc\"),o=r.n(i),s=r(\"0fea\"),l=r(\"2dab\"),c=r(\"c14a\"),u={name:\"SysUserAgentModal\",components:{JDate:l[\"default\"],JSelectUserByDep:c[\"default\"]},data:function(){return{title:\"操作\",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},username:\"\",confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{agentUserName:{rules:[{required:!0,message:\"请输入代理人用户名!\"}]},startTime:{rules:[{required:!0,message:\"请输入代理开始时间!\"}]},endTime:{rules:[{required:!0,message:\"请输入代理结束时间!\"}]}},url:{add:\"/sys/sysUserAgent/add\",edit:\"/sys/sysUserAgent/edit\",queryByUserName:\"/sys/sysUserAgent/queryByUserName\"}}},created:function(){},methods:{agentSettings:function(e){this.username=e,this.init()},init:function(){var e=this,t={userName:this.username};Object(s[\"c\"])(this.url.queryByUserName,t).then((function(t){t.success?e.edit(t.result):e.edit({userName:e.username,status:\"0\"})}))},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(o()(t.model,\"userName\",\"agentUserName\",\"status\",\"startTime\",\"endTime\"))}))},close:function(){this.$emit(\"close\"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(r,n){if(!r){t.confirmLoading=!0;var a=\"\",i=\"\";e.model.id?(a+=e.url.edit,i=\"put\"):(a+=e.url.add,i=\"post\");var o=Object.assign(e.model,n);Object(s[\"h\"])(a,o,i).then((function(e){e.success?t.$message.success(e.message):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()}}},d=u,h=r(\"2877\"),f=Object(h[\"a\"])(d,n,a,!1,null,\"5e663c2e\",null);t[\"default\"]=f.exports},\"88bc\":function(e,t,r){(function(t){var r=1/0,n=9007199254740991,a=\"[object Arguments]\",i=\"[object Function]\",o=\"[object GeneratorFunction]\",s=\"[object Symbol]\",l=\"object\"==typeof t&&t&&t.Object===Object&&t,c=\"object\"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function(\"return this\")();function d(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function h(e,t){var r=-1,n=e?e.length:0,a=Array(n);while(++r<n)a[r]=t(e[r],r,e);return a}function f(e,t){var r=-1,n=t.length,a=e.length;while(++r<n)e[a+r]=t[r];return e}var p=Object.prototype,m=p.hasOwnProperty,g=p.toString,y=u.Symbol,v=p.propertyIsEnumerable,b=y?y.isConcatSpreadable:void 0,w=Math.max;function x(e,t,r,n,a){var i=-1,o=e.length;r||(r=O),a||(a=[]);while(++i<o){var s=e[i];t>0&&r(s)?t>1?x(s,t-1,r,n,a):f(a,s):n||(a[a.length]=s)}return a}function S(e,t){return e=Object(e),C(e,t,(function(t,r){return r in e}))}function C(e,t,r){var n=-1,a=t.length,i={};while(++n<a){var o=t[n],s=e[o];r(s,o)&&(i[o]=s)}return i}function j(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var r=arguments,n=-1,a=w(r.length-t,0),i=Array(a);while(++n<a)i[n]=r[t+n];n=-1;var o=Array(t+1);while(++n<t)o[n]=r[n];return o[t]=i,d(e,this,o)}}function O(e){return D(e)||N(e)||!!(b&&e&&e[b])}function k(e){if(\"string\"==typeof e||_(e))return e;var t=e+\"\";return\"0\"==t&&1/e==-r?\"-0\":t}function N(e){return I(e)&&m.call(e,\"callee\")&&(!v.call(e,\"callee\")||g.call(e)==a)}var D=Array.isArray;function T(e){return null!=e&&L(e.length)&&!U(e)}function I(e){return R(e)&&T(e)}function U(e){var t=E(e)?g.call(e):\"\";return t==i||t==o}function L(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=n}function E(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function R(e){return!!e&&\"object\"==typeof e}function _(e){return\"symbol\"==typeof e||R(e)&&g.call(e)==s}var q=j((function(e,t){return null==e?{}:S(e,h(x(t,1),k))}));e.exports=q}).call(this,r(\"c8ba\"))},\"96cf\":function(e,t,r){var n=function(e){\"use strict\";var t,r=Object.prototype,n=r.hasOwnProperty,a=\"function\"===typeof Symbol?Symbol:{},i=a.iterator||\"@@iterator\",o=a.asyncIterator||\"@@asyncIterator\",s=a.toStringTag||\"@@toStringTag\";function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new D(n||[]);return i._invoke=j(e,r,o),i}function c(e,t,r){try{return{type:\"normal\",arg:e.call(t,r)}}catch(n){return{type:\"throw\",arg:n}}}e.wrap=l;var u=\"suspendedStart\",d=\"suspendedYield\",h=\"executing\",f=\"completed\",p={};function m(){}function g(){}function y(){}var v={};v[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,i)&&(v=w);var x=y.prototype=m.prototype=Object.create(v);function S(e){[\"next\",\"throw\",\"return\"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function C(e,t){function r(a,i,o,s){var l=c(e[a],e,i);if(\"throw\"!==l.type){var u=l.arg,d=u.value;return d&&\"object\"===typeof d&&n.call(d,\"__await\")?t.resolve(d.__await).then((function(e){r(\"next\",e,o,s)}),(function(e){r(\"throw\",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return r(\"throw\",e,o,s)}))}s(l.arg)}var a;function i(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}this._invoke=i}function j(e,t,r){var n=u;return function(a,i){if(n===h)throw new Error(\"Generator is already running\");if(n===f){if(\"throw\"===a)throw i;return I()}r.method=a,r.arg=i;while(1){var o=r.delegate;if(o){var s=O(o,r);if(s){if(s===p)continue;return s}}if(\"next\"===r.method)r.sent=r._sent=r.arg;else if(\"throw\"===r.method){if(n===u)throw n=f,r.arg;r.dispatchException(r.arg)}else\"return\"===r.method&&r.abrupt(\"return\",r.arg);n=h;var l=c(e,t,r);if(\"normal\"===l.type){if(n=r.done?f:d,l.arg===p)continue;return{value:l.arg,done:r.done}}\"throw\"===l.type&&(n=f,r.method=\"throw\",r.arg=l.arg)}}}function O(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,\"throw\"===r.method){if(e.iterator[\"return\"]&&(r.method=\"return\",r.arg=t,O(e,r),\"throw\"===r.method))return p;r.method=\"throw\",r.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return p}var a=c(n,e.iterator,r.arg);if(\"throw\"===a.type)return r.method=\"throw\",r.arg=a.arg,r.delegate=null,p;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,\"return\"!==r.method&&(r.method=\"next\",r.arg=t),r.delegate=null,p):i:(r.method=\"throw\",r.arg=new TypeError(\"iterator result is not an object\"),r.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(k,this),this.reset(!0)}function T(e){if(e){var r=e[i];if(r)return r.call(e);if(\"function\"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){while(++a<e.length)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,y[s]=g.displayName=\"GeneratorFunction\",e.isGeneratorFunction=function(e){var t=\"function\"===typeof e&&e.constructor;return!!t&&(t===g||\"GeneratorFunction\"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s in e||(e[s]=\"GeneratorFunction\")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},S(C.prototype),C.prototype[o]=function(){return this},e.AsyncIterator=C,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new C(l(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),x[s]=\"Generator\",x[i]=function(){return this},x.toString=function(){return\"[object Generator]\"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)\"t\"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type=\"throw\",s.arg=e,r.next=n,a&&(r.method=\"next\",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if(\"root\"===o.tryLoc)return a(\"end\");if(o.tryLoc<=this.prev){var l=n.call(o,\"catchLoc\"),c=n.call(o,\"finallyLoc\");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error(\"try statement without catch or finally\");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,\"finallyLoc\")&&this.prev<a.finallyLoc){var i=a;break}}i&&(\"break\"===e||\"continue\"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method=\"next\",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(\"throw\"===n.type){var a=n.arg;N(r)}return a}}throw new Error(\"illegal catch attempt\")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},\"next\"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=n}catch(a){Function(\"r\",\"regeneratorRuntime = r\")(n)}},a34a:function(e,t,r){e.exports=r(\"96cf\")},a505:function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"a-modal\",{staticStyle:{\"margin-top\":\"-70px\"},attrs:{width:e.modalWidth,visible:e.visible,title:e.title,cancelText:\"关闭\",wrapClassName:\"ant-modal-cust-warp\"},on:{ok:e.handleSubmit,cancel:e.close}},[r(\"a-row\",{staticStyle:{\"background-color\":\"#ececec\",padding:\"10px\",margin:\"-10px\"},attrs:{gutter:10}},[r(\"a-col\",{attrs:{md:6,sm:24}},[r(\"a-card\",{attrs:{bordered:!1}},[r(\"a-directory-tree\",{attrs:{selectable:\"\",selectedKeys:e.selectedDepIds,checkStrictly:!0,dropdownStyle:{maxHeight:\"200px\",overflow:\"auto\"},treeData:e.departTree,expandAction:!1,expandedKeys:e.expandedKeys},on:{\"update:expandedKeys\":function(t){e.expandedKeys=t},\"update:expanded-keys\":function(t){e.expandedKeys=t},select:e.onDepSelect}})],1)],1),r(\"a-col\",{attrs:{md:18,sm:24}},[r(\"a-card\",{attrs:{bordered:!1}},[e._v(\"\\n        用户账号:\\n        \"),r(\"a-input-search\",{style:{width:\"150px\",marginBottom:\"15px\"},attrs:{placeholder:\"请输入账号\"},on:{search:e.onSearch},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,\"username\",t)},expression:\"queryParam.username\"}}),r(\"a-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{icon:\"redo\"},on:{click:function(t){return e.searchReset(1)}}},[e._v(\"重置\")]),r(\"a-table\",{ref:\"table\",attrs:{scroll:e.scrollTrigger,size:\"middle\",rowKey:\"id\",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,type:e.getType},loading:e.loading},on:{change:e.handleTableChange}})],1)],1)],1)],1)},a=[],i=r(\"a34a\"),o=r.n(i),s=r(\"ca00\"),l=r(\"4ec3\");function c(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){c(i,n,a,o,s,\"next\",e)}function s(e){c(i,n,a,o,s,\"throw\",e)}o(void 0)}))}}var d={name:\"JSelectUserByDepModal\",components:{},props:[\"modalWidth\",\"multi\",\"userIds\"],data:function(){return{queryParam:{username:\"\"},columns:[{title:\"用户账号\",align:\"center\",dataIndex:\"username\"},{title:\"用户姓名\",align:\"center\",dataIndex:\"realname\"},{title:\"性别\",align:\"center\",dataIndex:\"sex\",customRender:function(e){return 1===e?\"男\":2===e?\"女\":e}},{title:\"手机\",align:\"center\",dataIndex:\"phone\"},{title:\"部门\",align:\"center\",dataIndex:\"orgCode\"}],scrollTrigger:{},dataSource:[],selectedRowKeys:[],selectUserRows:[],selectUserIds:[],title:\"根据部门选择用户\",ipagination:{current:1,pageSize:10,pageSizeOptions:[\"10\",\"20\",\"30\"],showTotal:function(e,t){return t[0]+\"-\"+t[1]+\" 共\"+e+\"条\"},showQuickJumper:!0,showSizeChanger:!0,total:0},isorter:{column:\"createTime\",order:\"desc\"},selectedDepIds:[],departTree:[],visible:!1,form:this.$form.createForm(this),loading:!1,expandedKeys:[]}},computed:{getType:function(){return 1==this.multi?\"checkbox\":\"radio\"}},watch:{userIds:{immediate:!0,handler:function(){this.initUserNames()}}},created:function(){this.resetScreenSize(),this.loadData()},methods:{initUserNames:function(){var e=this;if(this.userIds){var t=this.userIds.split(\",\")+\",\";Object(l[\"A\"])({username:t,pageNo:1,pageSize:t.length}).then((function(t){if(t.success){var r=[],n=[];t.result.records.forEach((function(e){n.push(e[\"realname\"]),r.push(e[\"id\"])})),e.selectedRowKeys=r,e.$emit(\"initComp\",n.join(\",\"))}}))}else this.$emit(\"initComp\",\"\")},loadData:function(){var e=u(o.a.mark((function e(t){var r,n=this;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1===t&&(this.ipagination.current=1),!(this.selectedDepIds&&this.selectedDepIds.length>0)){e.next=6;break}return e.next=4,this.initQueryUserByDepId(this.selectedDepIds);case 4:e.next=10;break;case 6:return this.loading=!0,r=this.getQueryParams(),e.next=10,Object(l[\"A\"])(r).then((function(e){e.success&&(n.dataSource=e.result.records,n.ipagination.total=e.result.total)})).finally((function(){n.loading=!1}));case 10:case\"end\":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetScreenSize:function(){var e=document.body.clientWidth;this.scrollTrigger=e<500?{x:800}:{}},showModal:function(){this.visible=!0,this.queryDepartTree(),this.initUserNames(),this.loadData(),this.form.resetFields()},getQueryParams:function(){var e=Object.assign({},this.queryParam,this.isorter);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,Object(s[\"d\"])(e)},getQueryField:function(){for(var e=\"id,\",t=0;t<this.columns.length;t++)e+=\",\"+this.columns[t].dataIndex;return e},searchReset:function(e){var t=this;0!==e&&(t.queryParam={},t.loadData(1)),t.selectedRowKeys=[],t.selectUserIds=[],t.selectedDepIds=[]},close:function(){this.searchReset(0),this.visible=!1},handleTableChange:function(e,t,r){Object.keys(r).length>0&&(this.isorter.column=r.field,this.isorter.order=\"ascend\"===r.order?\"asc\":\"desc\"),this.ipagination=e,this.loadData()},handleSubmit:function(){var e=this;this.getSelectUserRows(),e.$emit(\"ok\",e.selectUserRows,e.selectUserIds),e.searchReset(0),e.close()},getSelectUserRows:function(e){var t=this.dataSource,r=\"\";this.selectUserRows=[];for(var n=0,a=t.length;n<a;n++)this.selectedRowKeys.includes(t[n].id)&&(this.selectUserRows.push(t[n]),r=r+\",\"+t[n].username);this.selectUserIds=r.substring(1)},onDepSelect:function(e){null!=e[0]&&(this.initQueryUserByDepId(e),this.selectedDepIds[0]!==e[0]&&(this.selectedDepIds=[e[0]]))},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectionRows=t},onSearch:function(){this.loadData(1)},initQueryUserByDepId:function(e){var t=this;return this.loading=!0,Object(l[\"O\"])({id:e.toString()}).then((function(e){e.success&&(t.dataSource=e.result,t.ipagination.total=e.result.length)})).finally((function(){t.loading=!1}))},queryDepartTree:function(){var e=this;Object(l[\"D\"])().then((function(t){t.success&&(e.departTree=t.result,e.expandedKeys=e.departTree.map((function(e){return e.id})))}))},modalFormOk:function(){this.loadData()}}},h=d,f=(r(\"5de1\"),r(\"2877\")),p=Object(f[\"a\"])(h,n,a,!1,null,\"2835ef72\",null);t[\"default\"]=p.exports},c14a:function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"a-input-search\",{attrs:{placeholder:\"请先选择用户\",readOnly:\"\",unselectable:\"on\"},on:{search:e.onSearchDepUser},model:{value:e.userNames,callback:function(t){e.userNames=t},expression:\"userNames\"}},[r(\"a-button\",{attrs:{slot:\"enterButton\",disabled:e.disabled},slot:\"enterButton\"},[e._v(\"选择用户\")])],1),r(\"j-select-user-by-dep-modal\",{ref:\"selectModal\",attrs:{\"modal-width\":e.modalWidth,multi:e.multi,\"user-ids\":e.value},on:{ok:e.selectOK,initComp:e.initComp}})],1)},a=[],i=r(\"a505\"),o={name:\"JSelectUserByDep\",components:{JSelectUserByDepModal:i[\"default\"]},props:{modalWidth:{type:Number,default:1250,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},multi:{type:Boolean,default:!0,required:!1}},data:function(){return{userIds:\"\",userNames:\"\"}},mounted:function(){this.userIds=this.value},watch:{value:function(e){this.userIds=e}},model:{prop:\"value\",event:\"change\"},methods:{initComp:function(e){this.userNames=e},onSearchDepUser:function(){this.$refs.selectModal.showModal()},selectOK:function(e,t){if(e){var r=\"\",n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;r+=\",\"+l.realname}}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}this.userNames=r.substring(1),this.userIds=t}else this.userNames=\"\",this.userIds=\"\";this.$emit(\"change\",this.userIds)}}},s=o,l=r(\"2877\"),c=Object(l[\"a\"])(s,n,a,!1,null,\"bd3f15c8\",null);t[\"default\"]=c.exports},ce6e:function(e,t,r){}}]);","extractedComments":[]}