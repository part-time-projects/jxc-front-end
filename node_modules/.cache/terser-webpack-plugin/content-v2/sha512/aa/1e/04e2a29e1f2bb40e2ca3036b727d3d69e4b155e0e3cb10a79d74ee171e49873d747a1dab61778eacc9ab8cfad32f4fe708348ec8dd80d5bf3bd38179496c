{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0f1e66bf\"],{\"0ff6\":function(e,t,a){},\"2dae\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-drawer\",{attrs:{title:e.title,width:e.width,placement:\"right\",closable:e.readOnly,visible:e.visible},on:{close:e.close}},[a(\"a-spin\",{attrs:{spinning:e.confirmLoading}},[a(\"a-form\",{attrs:{form:e.form}},[a(\"a-form-item\",{directives:[{name:\"show\",rawName:\"v-show\",value:1==e.localMenuType,expression:\"localMenuType==1\"}],attrs:{label:\"上级物料\",labelCol:e.labelCol,wrapperCol:e.wrapperCol,\"validate-status\":e.validateStatus,hasFeedback:!0,required:!0}},[a(\"span\",{attrs:{slot:\"help\"},slot:\"help\"},[e._v(e._s(\"error\"==e.validateStatus?\"请选择上级物料\":\"  \"))]),a(\"a-tree-select\",{staticStyle:{width:\"100%\"},attrs:{dropdownStyle:{maxHeight:\"300px\",overflow:\"auto\"},treeData:e.treeData,placeholder:\"请选择父级物料\",disabled:e.disableSubmit},on:{change:e.handleParentIdChange},model:{value:e.model.parentId,callback:function(t){e.$set(e.model,\"parentId\",t)},expression:\"model.parentId\"}})],1),a(\"a-form-item\",{attrs:{label:\"编码\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"code\",e.validatorRules.code],expression:\"['code', validatorRules.code]\"}],attrs:{readOnly:\"add\"!==e.action,placeholder:\"请输入编码\"}})],1),a(\"a-form-item\",{attrs:{label:\"名称\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"name\",e.validatorRules.name],expression:\"['name', validatorRules.name]\"}],attrs:{readOnly:e.readOnly,placeholder:\"请输入名称\"}})],1),a(\"a-form-item\",{attrs:{label:\"分类\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"j-tree-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"categoryId\",e.validatorRules.categoryId],expression:\"['categoryId', validatorRules.categoryId]\"}],ref:\"treeSelect\",attrs:{disabled:e.readOnly,placeholder:\"请选择物料分类\",dict:\"bas_material_category,name,id\",pidField:\"pid\",pidValue:\"0\",hasChildField:\"has_child\"}})],1),a(\"a-form-item\",{attrs:{label:\"规格型号\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"model\"],expression:\"['model']\"}],attrs:{readOnly:e.readOnly,placeholder:\"请输入规格型号\"}})],1),a(\"a-form-item\",{attrs:{label:\"计量单位\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"j-dict-select-tag\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"unitId\",e.validatorRules.unitId],expression:\"['unitId', validatorRules.unitId]\"}],attrs:{disabled:e.readOnly,type:\"list\",\"trigger-change\":!0,dictCode:\"bas_measure_unit,name,id\",placeholder:\"请选择计量单位\"}})],1),a(\"a-form-item\",{attrs:{label:\"销售价格\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"salePrice\",e.validatorRules.salePrice],expression:\"['salePrice', validatorRules.salePrice]\"}],staticStyle:{width:\"100%\"},attrs:{disabled:e.readOnly}})],1),a(\"a-form-item\",{attrs:{label:\"是否启用\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"j-dict-select-tag\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"isEnabled\",e.validatorRules.isEnabled],expression:\"['isEnabled', validatorRules.isEnabled]\"}],attrs:{disabled:e.readOnly,type:\"list\",\"trigger-change\":!0,dictCode:\"yn\",placeholder:\"请选择是否启用\"}})],1),a(\"a-form-item\",{attrs:{label:\"备注\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"remark\"],expression:\"['remark']\"}],attrs:{readOnly:e.readOnly}})],1),a(\"a-form-item\",{attrs:{label:\"创建人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"createBy\"],expression:\"['createBy']\"}],attrs:{disabled:\"\"}})],1),a(\"a-form-item\",{attrs:{label:\"创建时间\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"j-date\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"createTime\"],expression:\"['createTime']\"}],staticStyle:{width:\"100%\"},attrs:{disabled:\"\",\"trigger-change\":!0}})],1),a(\"a-form-item\",{attrs:{label:\"修改人\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"updateBy\"],expression:\"['updateBy']\"}],attrs:{disabled:\"\"}})],1),a(\"a-form-item\",{attrs:{label:\"修改时间\",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a(\"j-date\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"updateTime\"],expression:\"['updateTime']\"}],staticStyle:{width:\"100%\"},attrs:{disabled:\"\",\"trigger-change\":!0}})],1)],1)],1),e.readOnly?e._e():a(\"div\",[a(\"a-button\",{attrs:{type:\"primary\"},on:{click:e.handleOk}},[e._v(\"确定\")]),a(\"a-button\",{on:{click:e.handleCancel}},[e._v(\"取消\")])],1)],1)},l=[],i=a(\"0fea\"),n=a(\"88bc\"),o=a.n(n),s=a(\"2dab\"),d=a(\"7b16\"),c=a(\"b098\"),u=a(\"4ec3\"),p={name:\"BasMaterialModal\",components:{JDate:s[\"default\"],JDictSelectTag:d[\"default\"],JTreeSelect:c[\"default\"],queryTreeListForMaterial:u[\"M\"]},data:function(){return{action:\"\",form:this.$form.createForm(this),title:\"操作\",localMenuType:0,width:600,visible:!1,model:{},treeData:[],validateStatus:\"\",disableSubmit:!1,labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:17}},confirmLoading:!1,validatorRules:{code:{rules:[{required:!0,message:\"请输入编码!\"}]},name:{rules:[{required:!0,message:\"请输入名称!\"}]},unitId:{rules:[{required:!0,message:\"请输入计量单位!\"}]},categoryId:{rules:[{required:!0,message:\"请输入分类!\"}]},isEnabled:{rules:[{required:!0,message:\"请输入是否启用!\"}]},salePrice:{rules:[{pattern:/^(([1-9][0-9]*)|([0]\\.\\d{0,2}|[1-9][0-9]*\\.\\d{0,2}))$/,message:\"请输入正确的金额!\"}]}},url:{add:\"/bas/basMaterial/add\",edit:\"/bas/basMaterial/edit\"}}},computed:{readOnly:function(){return\"add\"!==this.action&&\"edit\"!==this.action}},created:function(){},methods:{loadTree:function(){var e=this;Object(u[\"M\"])().then((function(t){if(t.success){e.treeData=[];for(var a=t.result.treeList,r=0;r<a.length;r++){var l=a[r];l.isLeaf=l.leaf,e.treeData.push(l)}}}))},add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.loadTree(),this.$nextTick((function(){t.form.setFieldsValue(o()(t.model,\"code\",\"name\",\"categoryId\",\"isEnabled\",\"model\",\"unitId\",\"salePrice\",\"taxCode\",\"remark\",\"createBy\",\"createTime\",\"updateBy\",\"updateTime\"))}))},close:function(){this.$emit(\"close\"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var l=\"\",n=\"\";e.model.id?(l+=e.url.edit,n=\"put\"):(l+=e.url.add,n=\"post\");var o=Object.assign(e.model,r);Object(i[\"h\"])(l,o,n).then((function(e){e.success?(t.$message.success(e.message),t.$emit(\"ok\")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()},popupCallback:function(e){this.form.setFieldsValue(o()(e,\"code\",\"name\",\"categoryId\",\"isEnabled\",\"model\",\"unitId\",\"salePrice\",\"taxCode\",\"remark\",\"createBy\",\"createTime\",\"updateBy\",\"updateTime\"))},handleParentIdChange:function(e){this.validateStatus=e?\"success\":\"error\"}}},f=p,h=(a(\"4051\"),a(\"2877\")),m=Object(h[\"a\"])(f,r,l,!1,null,\"1f33bf2b\",null);t[\"default\"]=m.exports},4051:function(e,t,a){\"use strict\";var r=a(\"0ff6\"),l=a.n(r);l.a},\"88bc\":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,l=\"[object Arguments]\",i=\"[object Function]\",n=\"[object GeneratorFunction]\",o=\"[object Symbol]\",s=\"object\"==typeof t&&t&&t.Object===Object&&t,d=\"object\"==typeof self&&self&&self.Object===Object&&self,c=s||d||Function(\"return this\")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function p(e,t){var a=-1,r=e?e.length:0,l=Array(r);while(++a<r)l[a]=t(e[a],a,e);return l}function f(e,t){var a=-1,r=t.length,l=e.length;while(++a<r)e[l+a]=t[a];return e}var h=Object.prototype,m=h.hasOwnProperty,b=h.toString,v=c.Symbol,y=h.propertyIsEnumerable,g=v?v.isConcatSpreadable:void 0,C=Math.max;function w(e,t,a,r,l){var i=-1,n=e.length;a||(a=O),l||(l=[]);while(++i<n){var o=e[i];t>0&&a(o)?t>1?w(o,t-1,a,r,l):f(l,o):r||(l[l.length]=o)}return l}function S(e,t){return e=Object(e),x(e,t,(function(t,a){return a in e}))}function x(e,t,a){var r=-1,l=t.length,i={};while(++r<l){var n=t[r],o=e[n];a(o,n)&&(i[n]=o)}return i}function j(e,t){return t=C(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,l=C(a.length-t,0),i=Array(l);while(++r<l)i[r]=a[t+r];r=-1;var n=Array(t+1);while(++r<t)n[r]=a[r];return n[t]=i,u(e,this,n)}}function O(e){return D(e)||T(e)||!!(g&&e&&e[g])}function I(e){if(\"string\"==typeof e||R(e))return e;var t=e+\"\";return\"0\"==t&&1/e==-a?\"-0\":t}function T(e){return F(e)&&m.call(e,\"callee\")&&(!y.call(e,\"callee\")||b.call(e)==l)}var D=Array.isArray;function k(e){return null!=e&&$(e.length)&&!N(e)}function F(e){return L(e)&&k(e)}function N(e){var t=q(e)?b.call(e):\"\";return t==i||t==n}function $(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=r}function q(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function L(e){return!!e&&\"object\"==typeof e}function R(e){return\"symbol\"==typeof e||L(e)&&b.call(e)==o}var B=j((function(e,t){return null==e?{}:S(e,p(w(t,1),I))}));e.exports=B}).call(this,a(\"c8ba\"))},b098:function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-tree-select\",{staticStyle:{width:\"100%\"},attrs:{allowClear:\"\",labelInValue:\"\",getPopupContainer:function(e){return e.parentNode},disabled:e.disabled,dropdownStyle:{maxHeight:\"400px\",overflow:\"auto\"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple},on:{change:e.onChange,search:e.onSearch}})},l=[],i=a(\"0fea\");function n(e){return n=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n(e)}function o(e){return c(e)||d(e)||s()}function s(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function d(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var u={name:\"JTreeSelect\",props:{value:{type:String,required:!1},placeholder:{type:String,default:\"请选择\",required:!1},dict:{type:String,default:\"\",required:!1},pidField:{type:String,default:\"pid\",required:!1},pidValue:{type:String,default:\"\",required:!1},disabled:{type:Boolean,default:!1,required:!1},hasChildField:{type:String,default:\"\",required:!1},condition:{type:String,default:\"\",required:!1},multiple:{type:Boolean,default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1}},data:function(){return{treeValue:null,treeData:[],url:\"/sys/dict/loadTreeData\",view:\"/sys/dict/loadDictItem/\",tableName:\"\",text:\"\",code:\"\"}},watch:{value:function(){this.loadItemByCode()},dict:function(){this.initDictInfo(),this.loadRoot()}},created:function(){var e=this;this.validateProp().then((function(){e.initDictInfo(),e.loadRoot(),e.loadItemByCode()}))},methods:{loadItemByCode:function(){var e=this;this.value&&\"0\"!=this.value?Object(i[\"c\"])(\"\".concat(this.view).concat(this.dict),{key:this.value}).then((function(t){if(t.success){var a=e.value.split(\",\");e.treeValue=t.result.map((function(e,t){return{key:a[t],value:a[t],label:e}})),e.onLoadTriggleChange(t.result[0])}})):this.treeValue=null},onLoadTriggleChange:function(e){!this.multiple&&this.loadTriggleChange&&this.$emit(\"change\",this.value,e)},initDictInfo:function(){var e=this.dict.split(\",\");this.tableName=e[0],this.text=e[1],this.code=e[2]},asyncLoadTreeData:function(e){var t=this;return new Promise((function(a){if(e.$vnode.children)a();else{var r=e.$vnode.key,l={pid:r,tableName:t.tableName,text:t.text,code:t.code,pidField:t.pidField,hasChildField:t.hasChildField,condition:t.condition};Object(i[\"c\"])(t.url,l).then((function(e){if(e.success){var l=!0,i=!1,n=void 0;try{for(var s,d=e.result[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var c=s.value;c.value=c.key,0==c.leaf?c.isLeaf=!1:1==c.leaf&&(c.isLeaf=!0)}}catch(u){i=!0,n=u}finally{try{l||null==d.return||d.return()}finally{if(i)throw n}}t.addChildren(r,e.result,t.treeData),t.treeData=o(t.treeData)}a()}))}}))},addChildren:function(e,t,a){if(a&&a.length>0){var r=!0,l=!1,i=void 0;try{for(var n,o=a[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var s=n.value;if(s.key==e){t&&0!=t.length?s.children=t:s.isLeaf=!0;break}this.addChildren(e,t,s.children)}}catch(d){l=!0,i=d}finally{try{r||null==o.return||o.return()}finally{if(l)throw i}}}},loadRoot:function(){var e=this,t={pid:this.pidValue,tableName:this.tableName,text:this.text,code:this.code,pidField:this.pidField,hasChildField:this.hasChildField,condition:this.condition};Object(i[\"c\"])(this.url,t).then((function(t){if(t.success&&t.result){var a=!0,r=!1,l=void 0;try{for(var i,n=t.result[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var s=i.value;s.value=s.key,0==s.leaf?s.isLeaf=!1:1==s.leaf&&(s.isLeaf=!0)}}catch(d){r=!0,l=d}finally{try{a||null==n.return||n.return()}finally{if(r)throw l}}e.treeData=o(t.result)}}))},onChange:function(e){e?e instanceof Array?(this.$emit(\"change\",e.map((function(e){return e.value})).join(\",\")),this.treeValue=e):(this.$emit(\"change\",e.value,e.label),this.treeValue=e):(this.$emit(\"change\",\"\"),this.treeValue=null)},onSearch:function(e){},getCurrTreeData:function(){return this.treeData},validateProp:function(){var e=this,t=this.condition;return new Promise((function(a,r){if(t)try{var l=JSON.parse(t);\"object\"==n(l)&&l?a():(e.$message.error(\"组件JTreeSelect-condition传值有误，需要一个json字符串!\"),r())}catch(i){e.$message.error(\"组件JTreeSelect-condition传值有误，需要一个json字符串!\"),r()}else a()}))}},model:{prop:\"value\",event:\"change\"}},p=u,f=a(\"2877\"),h=Object(f[\"a\"])(p,r,l,!1,null,null,null);t[\"default\"]=h.exports}}]);","extractedComments":[]}