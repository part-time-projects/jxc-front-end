{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3fbfd64c\",\"chunk-2d229444\"],{\"4d917\":function(t,e,n){\"use strict\";var a=n(\"f168\"),i=n.n(a);i.a},\"7c93\":function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"a-modal\",{attrs:{title:\"导入EXCEL\",width:600,visible:t.visible,confirmLoading:t.uploading},on:{cancel:t.handleClose}},[n(\"a-upload\",{attrs:{name:\"file\",multiple:!0,accept:\".xls,.xlsx\",fileList:t.fileList,remove:t.handleRemove,beforeUpload:t.beforeUpload}},[n(\"a-button\",[n(\"a-icon\",{attrs:{type:\"upload\"}}),t._v(\"\\n      选择导入文件\\n    \")],1)],1),n(\"template\",{slot:\"footer\"},[n(\"a-button\",{on:{click:t.handleClose}},[t._v(\"关闭\")]),n(\"a-button\",{attrs:{type:\"primary\",disabled:0===t.fileList.length,loading:t.uploading},on:{click:t.handleImport}},[t._v(\"\\n      \"+t._s(t.uploading?\"上传中...\":\"开始上传\")+\"\\n    \")])],1)],2)},i=[],o=n(\"0fea\");function r(t){return l(t)||c(t)||s()}function s(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function c(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var u={name:\"JImportModal\",props:{url:{type:String,default:\"\",required:!1},biz:{type:String,default:\"\",required:!1}},data:function(){return{visible:!1,uploading:!1,fileList:[],uploadAction:\"\",foreignKeys:\"\"}},watch:{url:function(t){t&&(this.uploadAction=window._CONFIG[\"domianURL\"]+t)}},created:function(){this.uploadAction=window._CONFIG[\"domianURL\"]+this.url},methods:{handleClose:function(){this.visible=!1},show:function(t){this.fileList=[],this.uploading=!1,this.visible=!0,this.foreignKeys=t},handleRemove:function(t){var e=this.fileList.indexOf(t),n=this.fileList.slice();n.splice(e,1),this.fileList=n},beforeUpload:function(t){return this.fileList=[].concat(r(this.fileList),[t]),!1},handleImport:function(){var t=this,e=this.fileList,n=new FormData;this.biz&&n.append(\"isSingleTableImport\",this.biz),this.foreignKeys&&this.foreignKeys.length>0&&n.append(\"foreignKeys\",this.foreignKeys),e.forEach((function(t){n.append(\"files[]\",t)})),this.uploading=!0,Object(o[\"i\"])(this.uploadAction,n).then((function(e){t.uploading=!1,e.success?(t.$message.success(e.message),t.visible=!1,t.$emit(\"ok\")):t.$message.warning(e.message)}))}}},d=u,h=n(\"2877\"),_=Object(h[\"a\"])(d,a,i,!1,null,\"4051e061\",null);e[\"default\"]=_.exports},\"8d02\":function(t,e,n){},9937:function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"a-card\",{staticStyle:{height:\"100%\"},attrs:{bordered:!1}},[n(\"div\",{staticClass:\"table-page-search-wrapper\"},[n(\"a-form\",{attrs:{layout:\"inline\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.searchByquery(e)}}},[t.queryInfo&&t.queryInfo.length>0?n(\"a-row\",{attrs:{gutter:24}},[t._l(t.queryInfo,(function(e,a){return[\"1\"===e.hidden?[\"datetime\"==e.view?n(\"a-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.toggleSearchStatus,expression:\"toggleSearchStatus\"}],key:\"query\"+a,attrs:{md:12,sm:16}},[n(\"online-query-form-item\",{attrs:{queryParam:t.queryParam,item:e,dictOptions:t.dictOptions}})],1):n(\"a-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.toggleSearchStatus,expression:\"toggleSearchStatus\"}],key:\"query\"+a,attrs:{md:6,sm:8}},[n(\"online-query-form-item\",{attrs:{queryParam:t.queryParam,item:e,dictOptions:t.dictOptions}})],1)]:[\"datetime\"==e.view?n(\"a-col\",{key:\"query\"+a,attrs:{md:12,sm:16}},[n(\"online-query-form-item\",{attrs:{queryParam:t.queryParam,item:e,dictOptions:t.dictOptions}})],1):n(\"a-col\",{key:\"query\"+a,attrs:{md:6,sm:8}},[n(\"online-query-form-item\",{attrs:{queryParam:t.queryParam,item:e,dictOptions:t.dictOptions}})],1)]]})),n(\"a-col\",{attrs:{md:6,sm:8}},[n(\"span\",{staticClass:\"table-page-search-submitButtons\",staticStyle:{float:\"left\",overflow:\"hidden\"}},[n(\"a-button\",{attrs:{type:\"primary\",icon:\"search\"},on:{click:t.searchByquery}},[t._v(\"查询\")]),n(\"a-button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"primary\",icon:\"reload\"},on:{click:t.searchReset}},[t._v(\"重置\")]),n(\"a\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:t.handleToggleSearch}},[t._v(\"\\n              \"+t._s(t.toggleSearchStatus?\"收起\":\"展开\")+\"\\n              \"),n(\"a-icon\",{attrs:{type:t.toggleSearchStatus?\"up\":\"down\"}})],1)],1)])],2):t._e()],1)],1),n(\"div\",{staticClass:\"table-operator\"},[t.buttonSwitch.add?n(\"a-button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:t.handleAdd}},[t._v(\"新增\")]):t._e(),t._l(t.cgButtonList,(function(e,a){return t.cgButtonList&&t.cgButtonList.length>0?[\"js\"==e.optType?n(\"a-button\",{key:\"cgbtn\"+a,attrs:{type:\"primary\",icon:e.buttonIcon},on:{click:function(n){return t.cgButtonJsHandler(e.buttonCode)}}},[t._v(\"\\n        \"+t._s(e.buttonName)+\"\\n      \")]):\"action\"==e.optType?n(\"a-button\",{key:\"cgbtn\"+a,attrs:{type:\"primary\",icon:e.buttonIcon},on:{click:function(n){return t.cgButtonActionHandler(e.buttonCode)}}},[t._v(\"\\n        \"+t._s(e.buttonName)+\"\\n      \")]):t._e()]:t._e()})),n(\"j-super-query\",{ref:\"superQuery\",attrs:{fieldList:t.superQuery.fieldList,saveCode:t.$route.fullPath,loading:t.table.loading},on:{handleSuperQuery:t.handleSuperQuery}}),t.buttonSwitch.batch_delete?n(\"a-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.table.selectedRowKeys.length>0,expression:\"table.selectedRowKeys.length > 0\"}],attrs:{ghost:\"\",type:\"primary\",icon:\"delete\"},on:{click:t.handleDelBatch}},[t._v(\"批量删除\")]):t._e()],2),n(\"div\",[n(\"div\",{staticClass:\"ant-alert ant-alert-info\",staticStyle:{\"margin-bottom\":\"16px\"}},[n(\"i\",{staticClass:\"anticon anticon-info-circle ant-alert-icon\"}),t._v(\"\\n      已选择 \"),n(\"a\",{staticStyle:{\"font-weight\":\"600\"}},[t._v(t._s(t.table.selectedRowKeys.length))]),t._v(\"项  \\n      \"),n(\"a\",{staticStyle:{\"margin-left\":\"24px\"},on:{click:t.onClearSelected}},[t._v(\"清空\")])]),n(\"a-table\",{ref:\"cgformAutoList\",staticStyle:{\"min-height\":\"300px\"},attrs:{bordered:\"\",size:\"middle\",rowKey:\"id\",columns:t.table.columns,dataSource:t.table.dataSource,pagination:t.table.pagination,loading:t.table.loading,rowSelection:t.rowSelectionConfig,scroll:t.table.scroll},on:{change:t.handleTableChange},scopedSlots:t._u([t._l(t.fieldHrefSlots,(function(e){return{key:e.slotName,fn:function(a,i){return[n(\"a\",{on:{click:function(n){return t.handleClickFieldHref(e,i)}}},[t._v(t._s(a))])]}}})),{key:\"dateSlot\",fn:function(e){return[n(\"span\",[t._v(t._s(t.getFormatDate(e)))])]}},{key:\"htmlSlot\",fn:function(e){return[n(\"div\",{domProps:{innerHTML:t._s(e)}})]}},{key:\"imgSlot\",fn:function(e){return[e?n(\"img\",{staticStyle:{\"max-width\":\"80px\",\"font-size\":\"12px\",\"font-style\":\"italic\"},attrs:{src:t.getImgView(e),height:\"25px\",alt:\"图片不存在\"}}):n(\"span\",{staticStyle:{\"font-size\":\"12px\",\"font-style\":\"italic\"}},[t._v(\"无图片\")])]}},{key:\"fileSlot\",fn:function(e){return[e?n(\"a-button\",{attrs:{ghost:!0,type:\"primary\",icon:\"download\",size:\"small\"},on:{click:function(n){return t.downloadRowFile(e)}}},[t._v(\"\\n          下载\\n        \")]):n(\"span\",{staticStyle:{\"font-size\":\"12px\",\"font-style\":\"italic\"}},[t._v(\"无文件\")])]}},{key:\"action\",fn:function(e,a){return n(\"span\",{},[t.hasBpmStatus?[\"1\"==a.bpm_status||\"\"==a.bpm_status||null==a.bpm_status?[t.buttonSwitch.update?[n(\"a\",{on:{click:function(e){return t.handleEdit(a)}}},[t._v(\"编辑\")]),n(\"a-divider\",{attrs:{type:\"vertical\"}})]:t._e()]:t._e()]:[t.buttonSwitch.update?[n(\"a\",{on:{click:function(e){return t.handleEdit(a)}}},[t._v(\"编辑\")]),n(\"a-divider\",{attrs:{type:\"vertical\"}})]:t._e()],n(\"a-dropdown\",[n(\"a\",{staticClass:\"ant-dropdown-link\"},[t._v(\"\\n            更多 \"),n(\"a-icon\",{attrs:{type:\"down\"}})],1),n(\"a-menu\",{attrs:{slot:\"overlay\"},slot:\"overlay\"},[t.buttonSwitch.detail?n(\"a-menu-item\",[n(\"a\",{attrs:{href:\"javascript:;\"},on:{click:function(e){return t.handleDetail(a)}}},[t._v(\"详情\")])]):t._e(),t.hasBpmStatus?[\"1\"==a.bpm_status||\"\"==a.bpm_status||null==a.bpm_status?[t.buttonSwitch.delete?n(\"a-menu-item\",[n(\"a-popconfirm\",{attrs:{title:\"确定删除吗?\"},on:{confirm:function(){return t.handleDeleteOne(a)}}},[n(\"a\",[t._v(\"删除\")])])],1):t._e()]:t._e()]:[t.buttonSwitch.delete?n(\"a-menu-item\",[n(\"a-popconfirm\",{attrs:{title:\"确定删除吗?\"},on:{confirm:function(){return t.handleDeleteOne(a)}}},[n(\"a\",[t._v(\"删除\")])])],1):t._e()],t._l(t.cgButtonLinkList,(function(e,i){return t.cgButtonLinkList&&t.cgButtonLinkList.length>0?[t.showLinkButton(e,a)?n(\"a-menu-item\",{key:\"cgbtnLink\"+i},[n(\"a\",{attrs:{href:\"javascript:void(0);\"},on:{click:function(n){return t.cgButtonLinkHandler(a,e.buttonCode,e.optType)}}},[e.buttonIcon?n(\"a-icon\",{attrs:{type:e.buttonIcon}}):t._e(),t._v(\"\\n                  \"+t._s(e.buttonName)+\"\\n                \")],1)]):t._e()]:t._e()}))],2)],1)],2)}}],null,!0)}),n(\"onl-cgform-auto-modal\",{ref:\"modal\",attrs:{code:t.code},on:{success:t.handleFormSuccess,schema:t.handleGetSchema}}),n(\"j-import-modal\",{ref:\"importModal\",attrs:{url:t.getImportUrl()},on:{ok:t.importOk}}),n(\"a-modal\",t._g(t._b({},\"a-modal\",t.hrefComponent.model,!1),t.hrefComponent.on),[n(t.hrefComponent.is,t._b({tag:\"component\"},\"component\",t.hrefComponent.params,!1))],1)],1)])},i=[],o=n(\"c03d\"),r=o[\"a\"],s=(n(\"4d917\"),n(\"ee8f\"),n(\"2877\")),c=Object(s[\"a\"])(r,a,i,!1,null,\"5142c260\",null);e[\"default\"]=c.exports},c03d:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var _mixins_OnlAutoListMixin__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"b5ef\"),_api_manage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"0fea\"),_components_dict_JDictSelectUtil__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"89f2\"),_utils_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"ca00\"),_components_jeecg_JImportModal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"7c93\"),_comp_jeecg_JSuperQuery__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"8c6e\"),_ButtonExpHandler__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"dd5c\");function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach((function(e){_defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}__webpack_exports__[\"a\"]={name:\"OnlCgFormAutoList\",mixins:[_mixins_OnlAutoListMixin__WEBPACK_IMPORTED_MODULE_0__[\"a\"]],components:{JSuperQuery:_comp_jeecg_JSuperQuery__WEBPACK_IMPORTED_MODULE_5__[\"default\"],JImportModal:_components_jeecg_JImportModal__WEBPACK_IMPORTED_MODULE_4__[\"default\"]},data:function(){return{code:\"\",description:\"在线报表功能测试页面\",currentTableName:\"\",url:{getQueryInfo:\"/online/cgform/api/getQueryInfo/\",getColumns:\"/online/cgform/api/getColumns/\",getData:\"/online/cgform/api/getData/\",optPre:\"/online/cgform/api/form/\",exportXls:\"/online/cgform/api/exportXls/\",buttonAction:\"/online/cgform/api/doButton\"},flowCodePre:\"onl_\",isorter:{column:\"createTime\",order:\"desc\"},dictOptions:{},cgButtonLinkList:[],cgButtonList:[],queryInfo:[],queryParamsMap:{},toggleSearchStatus:!1,table:{loading:!0,scroll:{x:!1},columns:[],dataSource:[],selectedRowKeys:[],selectionRows:[],pagination:{}},metaPagination:{current:1,pageSize:10,pageSizeOptions:[\"10\",\"20\",\"30\"],showTotal:function(t,e){return e[0]+\"-\"+e[1]+\" 共\"+t+\"条\"},showQuickJumper:!0,showSizeChanger:!0,total:0},actionColumn:{title:\"操作\",dataIndex:\"action\",scopedSlots:{customRender:\"action\"},fixed:\"right\",align:\"center\",width:150},formTemplate:\"99\",EnhanceJS:\"\",hideColumns:[],buttonSwitch:{add:!0,update:!0,delete:!0,batch_delete:!0,import:!0,export:!0,detail:!0},hasBpmStatus:!1,checkboxFlag:!1,superQuery:{fieldList:[],params:\"\",matchType:\"and\"}}},created:function(){this.initAutoList()},mounted:function(){this.cgButtonJsHandler(\"mounted\")},watch:{$route:function(){this.initAutoList()}},computed:{rowSelectionConfig:function(){return this.checkboxFlag?{fixed:!0,selectedRowKeys:this.table.selectedRowKeys,onChange:this.handleChangeInTableSelect}:null},queryParam:{get:function(){return this.queryParamsMap[this.code]},set:function(t){this.$set(this.queryParamsMap,this.code,t)}}},methods:{hasBpmStatusFilter:function(){var t=this.table.columns,e=[],n=!0,a=!1,i=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var s=o.value;e.push(s.dataIndex)}}catch(c){a=!0,i=c}finally{try{n||null==r.return||r.return()}finally{if(a)throw i}}e.includes(\"bpm_status\")||e.includes(\"BPM_STATUS\")?this.hasBpmStatus=!0:this.hasBpmStatus=!1},initQueryInfo:function(){var t=this;Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"c\"])(\"\".concat(this.url.getQueryInfo).concat(this.code)).then((function(e){e.success?t.queryInfo=e.result:t.$message.warning(e.message)}))},initAutoList:function(){var t=this;if(!this.$route.params.code)return!1;this.superQuery.params=\"\",this.$refs.superQuery&&this.$refs.superQuery.handleReset(),this.table.loading=!0,this.code=this.$route.params.code,this.queryParam||(this.queryParam={}),Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"c\"])(\"\".concat(this.url.getColumns).concat(this.code)).then((function(e){if(e.success){\"Y\"==e.result.checkboxFlag?t.checkboxFlag=!0:t.checkboxFlag=!1,\"Y\"==e.result.paginationFlag?t.table.pagination=_objectSpread({},t.metaPagination):t.table.pagination=!1,t.fieldHrefSlots=e.result.fieldHrefSlots,t.dictOptions=e.result.dictOptions,t.formTemplate=e.result.formTemplate,t.description=e.result.description,t.currentTableName=e.result.currentTableName,t.initCgButtonList(e.result.cgButtonList),t.initCgEnhanceJs(e.result.enhanceJs),t.initButtonSwitch(e.result.hideColumns);for(var n=e.result.columns,a=0;a<n.length;a++)n[a].customRender&&function(){var e=n[a].customRender,i=\"_replace_text_\";if(e.startsWith(i)){var o=e.replace(i,\"\");n[a].customRender=function(t,e){return e[o]}}else n[a].customRender=function(n){return Object(_components_dict_JDictSelectUtil__WEBPACK_IMPORTED_MODULE_2__[\"c\"])(t.dictOptions[e],n)}}();1==e.result.scrollFlag?t.table.scroll={x:\"115%\"}:t.table.scroll={x:!1},n.push(t.actionColumn),t.table.columns=_toConsumableArray(n),t.hasBpmStatusFilter(),t.loadData(),t.initQueryInfo(),t.table.selectedRowKeys=[]}else t.$message.warning(e.message)}))},loadData:function(t){var e=this;if(this.table.pagination){1==t&&(this.table.pagination.current=1),this.table.loading=!0;var n=this.getQueryParams();Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"c\"])(\"\".concat(this.url.getData).concat(this.code),n).then((function(t){if(t.success){var n=t.result;Number(n.total)>0?(e.table.pagination.total=Number(n.total),e.table.dataSource=n.records):(e.table.pagination.total=0,e.table.dataSource=[])}else e.$message.warning(t.message)})).finally((function(){e.table.loading=!1}))}else this.loadDataNoPage()},loadDataNoPage:function(){var t=this;this.table.loading=!0;var e=this.getQueryParams();e[\"pageSize\"]=-521,Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"c\"])(\"\".concat(this.url.getData).concat(this.code),Object(_utils_util__WEBPACK_IMPORTED_MODULE_3__[\"d\"])(e)).then((function(e){if(e.success){var n=e.result;Number(n.total)>0?t.table.dataSource=n.records:t.table.dataSource=[]}else t.$message.warning(e.message)})).finally((function(){t.table.loading=!1}))},getQueryParams:function(){var t=Object.assign({},this.queryParam,this.isorter);return t.pageNo=this.table.pagination.current,t.pageSize=this.table.pagination.pageSize,t.superQueryMatchType=this.superQuery.matchType,t.superQueryParams=encodeURIComponent(this.superQuery.params),Object(_utils_util__WEBPACK_IMPORTED_MODULE_3__[\"d\"])(t)},handleChangeInTableSelect:function(t,e){this.table.selectedRowKeys=t,this.table.selectionRows=e,this.selectedRowKeys=t},handleTableChange:function(t,e,n){Object.keys(n).length>0&&(this.isorter.column=n.field,this.isorter.order=\"ascend\"==n.order?\"asc\":\"desc\"),this.table.pagination=t,this.loadData()},handleAdd:function(){this.cgButtonJsHandler(\"beforeAdd\"),this.$refs.modal.add(this.formTemplate)},handleImportXls:function(){this.$refs.importModal.show()},importOk:function(){this.loadData(1)},handleExportXls2:function(){var t=this.queryParam;this.table.selectedRowKeys&&this.table.selectedRowKeys.length>0&&(t[\"selections\"]=this.table.selectedRowKeys.join(\",\"));var e=encodeURI(JSON.stringify(t)),n=window._CONFIG[\"domianURL\"]+this.url.exportXls+this.code+\"?paramsStr=\"+e;window.location.href=n},handleExportXls:function(){var t=this,e=this.queryParam;this.table.selectedRowKeys&&this.table.selectedRowKeys.length>0&&(e[\"selections\"]=this.table.selectedRowKeys.join(\",\"));var n=JSON.stringify(Object(_utils_util__WEBPACK_IMPORTED_MODULE_3__[\"d\"])(e));Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"b\"])(this.url.exportXls+this.code,{paramsStr:n}).then((function(e){if(e)if(\"undefined\"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([e]),t.description+\".xls\");else{var n=window.URL.createObjectURL(new Blob([e])),a=document.createElement(\"a\");a.style.display=\"none\",a.href=n,a.setAttribute(\"download\",t.description+\".xls\"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)}else t.$message.warning(\"文件下载失败\")}))},handleEdit:function(t){this.cgButtonLinkHandler(t,\"beforeEdit\",\"js\"),this.$refs.modal.edit(this.formTemplate,t.id)},showLinkButton:function(t,e){var n=new _ButtonExpHandler__WEBPACK_IMPORTED_MODULE_6__[\"default\"](t.exp,e);return n.show},handleDetail:function(t){this.$refs.modal.detail(this.formTemplate,t.id)},handleDeleteOne:function(t){this.cgButtonLinkHandler(t,\"beforeDelete\",\"js\"),this.handleDelete(t.id)},handleDelete:function(t){var e=this;Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"a\"])(this.url.optPre+this.code+\"/\"+t).then((function(t){t.success?(e.$message.success(t.message),e.loadData()):e.$message.warning(t.message)}))},handleFormSuccess:function(){this.loadData()},handleGetSchema:function(t){if(t&&t.properties){var e=function(t,e){var n=e.type||\"string\";n=\"inputNumber\"===n?\"number\":n,t.push({type:n,value:e.key,text:e.title,dictCode:e.dictCode,dictTable:e.dictTable,dictText:e.dictText,options:e.enum||e.options,order:e.order})},n=[];for(var a in t.properties)if(t.properties.hasOwnProperty(a)){var i=t.properties[a];if(\"tab\"===i.view){var o={type:\"sub-table\",value:i.key,text:i.describe,children:[]},r=!0,s=!1,c=void 0;try{for(var l,u=i.columns[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var d=l.value;e(o.children,d)}}catch(m){s=!0,c=m}finally{try{r||null==u.return||u.return()}finally{if(s)throw c}}n.push(o)}else i.key=a,e(n,i)}for(var h=0;h<n.length;h++)for(var _=h+1;_<n.length;_++){var f=n[h],p=n[_];f.order>p.order&&(n[h]=p,n[_]=f)}this.superQuery.fieldList=n}},onClearSelected:function(){this.table.selectedRowKeys=[],this.table.selectionRows=[]},getImgView:function(t){return t&&t.indexOf(\",\")>0&&(t=t.substring(0,t.indexOf(\",\"))),window._CONFIG[\"staticDomainURL\"]+\"/\"+t},downloadRowFile:function(t){t?(t.indexOf(\",\")>0&&(t=t.substring(0,t.indexOf(\",\"))),window.open(window._CONFIG[\"staticDomainURL\"]+\"/\"+t)):this.$message.warning(\"未知的文件\")},handleDelBatch:function(){if(this.table.selectedRowKeys.length<=0)return this.$message.warning(\"请选择一条记录！\"),!1;var t=\"\",e=this;e.table.selectedRowKeys.forEach((function(e){t+=e+\",\"})),e.$confirm({title:\"确认删除\",content:\"是否删除选中数据?\",onOk:function(){e.handleDelete(t),e.onClearSelected()}})},searchByquery:function(){this.loadData(1)},searchReset:function(){this.queryParam={},this.loadData(1)},handleToggleSearch:function(){this.toggleSearchStatus=!this.toggleSearchStatus},getFormatDate:function(t){if(!t)return\"\";var e=t;return e.length>10&&(e=e.substring(0,10)),e},getImportUrl:function(){return\"/online/cgform/api/importXls/\"+this.code},initCgEnhanceJs:function initCgEnhanceJs(enhanceJs){if(enhanceJs){var Obj=eval(\"(\"+enhanceJs+\")\");this.EnhanceJS=new Obj(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"c\"],_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"i\"],_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"a\"]),this.cgButtonJsHandler(\"created\")}else this.EnhanceJS=\"\"},initCgButtonList:function(t){var e=[],n=[];if(t&&t.length>0)for(var a=0;a<t.length;a++){var i=t[a];\"button\"==i.buttonStyle?n.push(i):\"link\"==i.buttonStyle&&e.push(i)}this.cgButtonLinkList=[].concat(e),this.cgButtonList=[].concat(n)},cgButtonJsHandler:function(t){this.EnhanceJS[t]&&this.EnhanceJS[t](this)},cgButtonActionHandler:function(t){var e=this;if(!this.table.selectedRowKeys||0==this.table.selectedRowKeys.length)return this.$message.warning(\"请先选中一条记录\"),!1;if(this.table.selectedRowKeys.length>1)return this.$message.warning(\"请只选中一条记录\"),!1;var n={formId:this.code,buttonCode:t,dataId:this.table.selectedRowKeys[0]};Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"i\"])(this.url.buttonAction,n).then((function(t){t.success?(e.loadData(),e.$message.success(\"处理完成!\")):e.$message.warning(\"处理失败!\")}))},cgButtonLinkHandler:function(t,e,n){var a=this;if(\"js\"==n)this.EnhanceJS[e]&&this.EnhanceJS[e](this,t);else if(\"action\"==n){var i={formId:this.code,buttonCode:e,dataId:t.id};Object(_api_manage__WEBPACK_IMPORTED_MODULE_1__[\"i\"])(this.url.buttonAction,i).then((function(t){t.success?(a.loadData(),a.$message.success(\"处理完成!\")):a.$message.warning(\"处理失败!\")}))}},initButtonSwitch:function(t){var e=this;Object.keys(this.buttonSwitch).forEach((function(t){e.buttonSwitch[t]=!0})),t&&t.length>0&&Object.keys(this.buttonSwitch).forEach((function(n){t.indexOf(n)>=0&&(e.buttonSwitch[n]=!1)}))},handleSuperQuery:function(t,e){t&&0!==t.length?this.superQuery.params=JSON.stringify(t):this.superQuery.params=\"\",this.superQuery.matchType=e,this.loadData()}}}},dd5c:function(t,e,n){\"use strict\";function a(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.r(e),n.d(e,\"default\",(function(){return r}));var r=function(){function t(e,n){a(this,t),this._express=e,this._record=n}return o(t,[{key:\"show\",get:function(){if(!this._express||\"\"==this._express)return!0;var t=this._express.split(\"#\"),e=this._record[t[0]],n=t[1].toLowerCase();if(\"eq\"===n)return e==t[2];if(\"ne\"===n)return!(e==t[2]);if(\"empty\"===n)return\"true\"===t[2]||!0===t[2]?!e||\"\"==e:e&&e.length>0;if(\"in\"===n){var a=t[2].split(\",\");return a.indexOf(String(e))>=0}return!1}}]),t}()},ee8f:function(t,e,n){\"use strict\";var a=n(\"8d02\"),i=n.n(a);i.a},f168:function(t,e,n){}}]);","extractedComments":[]}