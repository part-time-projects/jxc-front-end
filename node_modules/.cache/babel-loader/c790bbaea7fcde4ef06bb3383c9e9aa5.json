{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\components\\EditableTableColumnsSetter.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\components\\EditableTableColumnsSetter.vue","mtime":1648374777613},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from \"vue\";\nimport { FormTypes } from \"@/utils/JEditableTableUtil\";\nexport default {\n  name: \"EditableTableColumnsSetter\",\n  props: {\n    columns: {\n      type: Array,\n      required: true\n    },\n    ignoreColumns: {\n      type: Array,\n      default: function _default() {\n        return ['rowIndex', 'action', 'flag'];\n      }\n    },\n    tableName: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      settingColumns: []\n    };\n  },\n  computed: {\n    ls_key: function ls_key() {\n      return this.$route.name + '/' + this.tableName + ':colsettings';\n    }\n  },\n  created: function created() {\n    this.initColumns();\n  },\n  methods: {\n    initColumns: function initColumns() {\n      //权限过滤（列权限控制时打开，修改第二个参数为授权码前缀）\n      //this.defColumns = colAuthFilter(this.defColumns,'testdemo:');\n      var that = this;\n      var colSettings = Vue.ls.get(this.ls_key);\n\n      if (colSettings == null) {\n        that.columns.forEach(function (item, i, array) {\n          that.settingColumns.push(item.key);\n        });\n      } else {\n        that.settingColumns = colSettings;\n        that.columns.forEach(function (item, i, array) {\n          if (that.ignoreColumns.includes(item.key)) return;\n\n          if (colSettings.includes(item.key)) {\n            if (item.typeDef !== undefined && item.typeDef !== null && item.typeDef !== \"\" && item.typeDef !== FormTypes.hidden) {\n              item.type = item.typeDef;\n            }\n          } else {\n            item.typeDef = item.type;\n            item.type = FormTypes.hidden;\n          }\n        });\n      }\n    },\n    //列设置更改事件\n    onColSettingsChange: function onColSettingsChange(checkedValues) {\n      var that = this;\n      Vue.ls.set(this.ls_key, checkedValues, 7 * 24 * 60 * 60 * 1000);\n      that.settingColumns = checkedValues;\n      that.columns.forEach(function (item, i, array) {\n        if (that.ignoreColumns.includes(item.key)) return;\n\n        if (checkedValues.includes(item.key)) {\n          if (item.typeDef !== undefined && item.typeDef !== null && item.typeDef !== \"\" && item.typeDef !== FormTypes.hidden) {\n            item.type = item.typeDef;\n          }\n        } else if (item.type !== FormTypes.hidden) {\n          item.typeDef = item.type;\n          item.type = FormTypes.hidden;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["EditableTableColumnsSetter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAqBA,OAAA,GAAA,MAAA,KAAA;AACA,SAAA,SAAA,QAAA,4BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,4BADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,aAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,CAAA,UAAA,EAAA,QAAA,EAAA,MAAA,CAAA;AAAA;AAFA,KALA;AASA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AATA,GAFA;AAiBA,EAAA,IAjBA,kBAiBA;AACA,WAAA;AACA,MAAA,cAAA,EAAA;AADA,KAAA;AAGA,GArBA;AAuBA,EAAA,QAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA,aAAA,KAAA,MAAA,CAAA,IAAA,GAAA,GAAA,GAAA,KAAA,SAAA,GAAA,cAAA;AAAA;AADA,GAvBA;AA2BA,EAAA,OA3BA,qBA2BA;AACA,SAAA,WAAA;AACA,GA7BA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA;AACA;AAEA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,WAAA,GAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA;;AACA,UAAA,WAAA,IAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA;AACA,UAAA,IAAA,CAAA,cAAA,CAAA,IAAA,CAAA,IAAA,CAAA,GAAA;AACA,SAFA;AAGA,OAJA,MAIA;AACA,QAAA,IAAA,CAAA,cAAA,GAAA,WAAA;AACA,QAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA;AACA,cAAA,IAAA,CAAA,aAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,EAAA;;AAEA,cAAA,WAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,gBAAA,IAAA,CAAA,OAAA,KAAA,SAAA,IAAA,IAAA,CAAA,OAAA,KAAA,IAAA,IACA,IAAA,CAAA,OAAA,KAAA,EADA,IACA,IAAA,CAAA,OAAA,KAAA,SAAA,CAAA,MADA,EACA;AACA,cAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,OAAA;AACA;AACA,WALA,MAKA;AACA,YAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,IAAA;AACA,YAAA,IAAA,CAAA,IAAA,GAAA,SAAA,CAAA,MAAA;AACA;AACA,SAZA;AAaA;AACA,KA3BA;AA6BA;AACA,IAAA,mBA9BA,+BA8BA,aA9BA,EA8BA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,MAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,KAAA,MAAA,EAAA,aAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,IAAA;AACA,MAAA,IAAA,CAAA,cAAA,GAAA,aAAA;AACA,MAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA;AACA,YAAA,IAAA,CAAA,aAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,EAAA;;AAEA,YAAA,aAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,cAAA,IAAA,CAAA,OAAA,KAAA,SAAA,IAAA,IAAA,CAAA,OAAA,KAAA,IAAA,IACA,IAAA,CAAA,OAAA,KAAA,EADA,IACA,IAAA,CAAA,OAAA,KAAA,SAAA,CAAA,MADA,EACA;AACA,YAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,OAAA;AACA;AACA,SALA,MAKA,IAAA,IAAA,CAAA,IAAA,KAAA,SAAA,CAAA,MAAA,EAAA;AACA,UAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,IAAA;AACA,UAAA,IAAA,CAAA,IAAA,GAAA,SAAA,CAAA,MAAA;AACA;AACA,OAZA;AAaA;AA/CA;AA/BA,CAAA","sourcesContent":["<template>\r\n  <a-popover title=\"自定义列\" trigger=\"click\" placement=\"topRight\">\r\n    <template slot=\"content\">\r\n      <a-checkbox-group @change=\"onColSettingsChange\" v-model=\"settingColumns\"\r\n                        :defaultValue=\"settingColumns\" style=\"width: 400px;\">\r\n        <a-row>\r\n          <template v-for=\"(item,index) in columns\">\r\n            <template v-if=\"!ignoreColumns.includes(item.key)\">\r\n              <a-col :span=\"12\">\r\n                <a-checkbox :value=\"item.key\">{{ item.title }}</a-checkbox>\r\n              </a-col>\r\n            </template>\r\n          </template>\r\n        </a-row>\r\n      </a-checkbox-group>\r\n    </template>\r\n    <a-button type=\"link\" icon=\"setting\">自定义列</a-button>\r\n  </a-popover>\r\n</template>\r\n\r\n<script>\r\n  import Vue from \"vue\";\r\n  import {FormTypes} from \"@/utils/JEditableTableUtil\";\r\n\r\n  export default {\r\n    name: \"EditableTableColumnsSetter\",\r\n    props: {\r\n      columns:{\r\n        type:Array,\r\n        required: true\r\n      },\r\n      ignoreColumns:{\r\n        type: Array,\r\n        default: () => ['rowIndex', 'action', 'flag']\r\n      },\r\n      tableName:{\r\n        type:String,\r\n        default: '',\r\n      },\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        settingColumns:[],\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      ls_key() { return this.$route.name + '/' + this.tableName + ':colsettings'},\r\n    },\r\n\r\n    created() {\r\n       this.initColumns();\r\n    },\r\n\r\n    methods: {\r\n      initColumns(){\r\n        //权限过滤（列权限控制时打开，修改第二个参数为授权码前缀）\r\n        //this.defColumns = colAuthFilter(this.defColumns,'testdemo:');\r\n\r\n        const that = this;\r\n        let colSettings = Vue.ls.get(this.ls_key);\r\n        if (colSettings == null) {\r\n          that.columns.forEach(function (item,i,array ) {\r\n            that.settingColumns.push(item.key);\r\n          })\r\n        }else{\r\n          that.settingColumns = colSettings;\r\n          that.columns.forEach(function (item,i,array ) {\r\n            if(that.ignoreColumns.includes(item.key))  return;\r\n\r\n            if (colSettings.includes(item.key)) {\r\n              if (item.typeDef !== undefined && item.typeDef !== null\r\n                && item.typeDef !== \"\" && item.typeDef !== FormTypes.hidden) {\r\n                item.type = item.typeDef;\r\n              }\r\n            } else {\r\n              item.typeDef = item.type;\r\n              item.type = FormTypes.hidden;\r\n            }\r\n          });\r\n        }\r\n      },\r\n\r\n      //列设置更改事件\r\n      onColSettingsChange (checkedValues) {\r\n        const that = this;\r\n        Vue.ls.set(this.ls_key, checkedValues, 7*24*60*60*1000)\r\n        that.settingColumns = checkedValues;\r\n        that.columns.forEach(function (item, i, array) {\r\n          if(that.ignoreColumns.includes(item.key))  return;\r\n\r\n          if (checkedValues.includes(item.key)) {\r\n            if (item.typeDef !== undefined && item.typeDef !== null\r\n              && item.typeDef !== \"\" && item.typeDef !== FormTypes.hidden) {\r\n              item.type = item.typeDef;\r\n            }\r\n          } else if (item.type !== FormTypes.hidden) {\r\n            item.typeDef = item.type;\r\n            item.type = FormTypes.hidden;\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n  }\r\n</script>\r\n"],"sourceRoot":"src/views/erp/components"}]}