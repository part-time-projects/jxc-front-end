{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\finance\\modules\\ReceivableCheckModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\finance\\modules\\ReceivableCheckModal.vue","mtime":1648374777628},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport pick from 'lodash.pick';\nimport JDate from '@/components/jeecg/JDate';\nimport JDictSelectTag from \"@/components/dict/JDictSelectTag\";\nimport { getAction, putAction, httpAction } from '@api/manage';\nimport splitPane from 'vue-splitpane';\nimport { getFormatDate } from \"../../utils/util\";\nimport RpCheckEntryList from \"./RpCheck/RpCheckEntryList\";\nimport RpCheckReceivableList from \"./RpCheck/RpCheckReceivableList\";\nimport RpCheckReceiptList from \"./RpCheck/RpCheckReceiptList\";\nexport default {\n  name: 'ReceivableCheckModal',\n  mixins: [],\n  components: {\n    JDate: JDate,\n    JDictSelectTag: JDictSelectTag,\n    RpCheckReceivableList: RpCheckReceivableList,\n    RpCheckReceiptList: RpCheckReceiptList,\n    RpCheckEntryList: RpCheckEntryList,\n    splitPane: splitPane\n  },\n  data: function data() {\n    return {\n      action: \"\",\n      title: '操作',\n      width: '1200px',\n      visible: false,\n      form: this.$form.createForm(this),\n      confirmLoading: false,\n      model: {},\n      moreStatus: false,\n      spans: {\n        labelCol: {\n          span: 3\n        },\n        wrapperCol: {\n          span: 21\n        },\n        labelCol1: {\n          span: 2\n        },\n        wrapperCol1: {\n          span: 22\n        },\n        labelCol2: {\n          span: 4\n        },\n        wrapperCol2: {\n          span: 20\n        },\n        labelCol3: {\n          span: 6\n        },\n        wrapperCol3: {\n          span: 18\n        },\n        labelCol6: {\n          span: 12\n        },\n        wrapperCol6: {\n          span: 12\n        }\n      },\n      validatorRules: {\n        billNo: {\n          rules: [{\n            required: true,\n            message: '请输入单据编号!'\n          }]\n        },\n        billDate: {\n          rules: [{\n            required: true,\n            message: '请输入单据日期!'\n          }]\n        },\n        receivableCheckType: {\n          rules: []\n        },\n        customerId: {\n          rules: []\n        },\n        remark: {\n          rules: []\n        },\n        billProcStatus: {\n          rules: []\n        },\n        isApproved: {\n          rules: []\n        },\n        isClosed: {\n          rules: []\n        },\n        isVoided: {\n          rules: []\n        },\n        effectiveTime: {\n          rules: []\n        },\n        approverId: {\n          rules: []\n        },\n        flowId: {\n          rules: []\n        },\n        createTime: {\n          rules: []\n        },\n        createBy: {\n          rules: []\n        },\n        sysOrgCode: {\n          rules: []\n        },\n        updateTime: {\n          rules: []\n        },\n        updateBy: {\n          rules: []\n        }\n      },\n      totalAmt1: 0,\n      entryCount1: 0,\n      ReceivableCount: 0,\n      selectedEntryCount1: 0,\n      selectedReceivableCount: 0,\n      totalAmt2: 0,\n      entryCount2: 0,\n      paymentCount: 0,\n      selectedEntryCount2: 0,\n      selectedReceiptCount: 0,\n      url: {\n        add: \"/finance/finReceivableCheck/add\",\n        edit: \"/finance/finReceivableCheck/edit\",\n        approve: \"/finance/finReceivableCheck/approve\",\n        finRpCheckEntry: {\n          list: '/finance/finReceivableCheck/queryFinReceivableCheckEntryByMainId'\n        }\n      }\n    };\n  },\n  computed: {\n    readOnly: function readOnly() {\n      return this.action !== \"add\" && this.action !== \"edit\";\n    },\n\n    /**\n     * @return {number}\n     */\n    ReceivableHeight: function ReceivableHeight() {\n      var a = this.ReceivableCount === 0 ? 4.5 : this.ReceivableCount,\n          b = this.entryCount1 === 0 ? 4.5 : this.entryCount1;\n      return (a > b ? a : b) * 38 + 150;\n    },\n    splitPaneHeight: function splitPaneHeight() {\n      var a = this.paymentCount === 0 ? 4.5 : this.paymentCount,\n          b = this.entryCount2 === 0 ? 4.5 : this.entryCount2;\n      return this.ReceivableHeight + (a > b ? a : b) * 38 + 180;\n    }\n  },\n  methods: {\n    addInit: function addInit() {\n      this.model = {}; //应收核销类型：收款核应收\n\n      this.model.receivableCheckType = '101'; //处理状态：编辑中\n\n      this.model.billProcStatus = '12'; // 请求后台的填值规则接口地址\n\n      var url = '/sys/fillRule/executeRuleByCode/';\n      var ruleCode = 'receivable_check_bill_no';\n      var that = this;\n      putAction(url + ruleCode, {}).then(function (res) {\n        // 执行成功，获取返回的值，并赋到页面上\n        if (res.success) {\n          that.$nextTick(function () {\n            that.form.setFieldsValue({\n              'billNo': res.result,\n              'billDate': getFormatDate()\n            });\n          });\n        }\n      });\n    },\n\n    /** 列表点击新增按钮时调用此方法 */\n    add: function add() {\n      this.addInit();\n      this.edit(this.model);\n    },\n    resetModal: function resetModal() {\n      var _this = this;\n\n      // reset modal\n      this.entryCount1 = 0;\n      this.selectedEntryCount1 = 0;\n      this.selectedReceivableCount = 0;\n      this.entryCount2 = 0;\n      this.selectedEntryCount2 = 0;\n      this.selectedReceiptCount = 0;\n      this.form.resetFields();\n      this.$nextTick(function () {\n        _this.$refs.rpCheckEntryList1.resetTable();\n\n        _this.$refs.rpCheckEntryList2.resetTable();\n\n        if (!_this.readOnly) {\n          _this.$refs.rpCheckReceivableList.resetTable();\n\n          _this.$refs.rpCheckReceiptList.resetTable();\n        }\n      });\n    },\n\n    /** 列表点击了编辑（修改）按钮时调用此方法 */\n    edit: function edit(record) {\n      var _this2 = this;\n\n      this.resetModal();\n      this.model = Object.assign({}, record);\n      this.visible = true;\n      this.$nextTick(function () {\n        _this2.form.setFieldsValue(pick(_this2.model, 'billNo', 'billDate', 'customerId', 'remark', 'billProcStatus', 'isApproved', 'isClosed', 'isVoided', 'effectiveTime', 'approverId', 'flowId', 'createTime', 'createBy', 'sysOrgCode', 'updateTime', 'updateBy'));\n      }); // 加载子表数据\n\n      this.$nextTick(function () {\n        if (_this2.model.id) {\n          queryCheckEntry(_this2);\n\n          _this2.onCustomerChange(_this2.model.customerId);\n        }\n      });\n      /** 查询数据 */\n\n      function queryCheckEntry(that) {\n        var url = that.url.finRpCheckEntry.list;\n        var params = {\n          id: that.model.id\n        };\n        that.$refs.rpCheckEntryList1.loading = true;\n        that.$refs.rpCheckEntryList2.loading = true;\n        getAction(url, params).then(function (res) {\n          var rows1 = [],\n              rows2 = [];\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = (res.result || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var row = _step.value;\n              if (row.checkSide === \"1\") rows1.push(row);else rows2.push(row);\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          that.$refs.rpCheckEntryList1.dataSource = rows1;\n          that.$refs.rpCheckEntryList2.dataSource = rows2;\n        }).finally(function () {\n          that.$refs.rpCheckEntryList1.loading = false;\n          that.$refs.rpCheckEntryList2.loading = false;\n        });\n      }\n    },\n    onCustomerChange: function onCustomerChange(val) {\n      if (!this.readOnly && val) {\n        var params = {\n          customerId: val\n        };\n        this.$refs.rpCheckReceivableList.queryParam = params;\n        this.$refs.rpCheckReceivableList.loadData(1);\n        this.$refs.rpCheckReceiptList.queryParam = params;\n        this.$refs.rpCheckReceiptList.loadData(1);\n      }\n    },\n    onReceivableDataSourceChange: function onReceivableDataSourceChange() {\n      this.ReceivableCount = this.$refs.rpCheckReceivableList.dataSource.length;\n      this.makeAdded(this.$refs.rpCheckReceivableList, this.$refs.rpCheckEntryList1);\n    },\n    //注意：\n    // rpCheckReceivableList与rpCheckReceiptList的loadData(),由于其中getAction是异步执行，\n    // 所以如果在其后调用本函数将无效（此时rpCheckReceivableList.dataSource还是空的）。\n    makeAdded: function makeAdded(fromComponent, toComponent) {\n      var rows = [];\n      var change = false;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = fromComponent.dataSource[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var fromRecord = _step2.value;\n          var added = false;\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = toComponent.dataSource[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var toRecord = _step3.value;\n\n              if (fromRecord.id === toRecord.sourceId) {\n                added = true;\n\n                if (fromRecord.added !== \"是\") {\n                  fromRecord.added = \"是\";\n                  change = true;\n                }\n\n                break;\n              }\n            } // 以前是added，但现在不是\n\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n\n          if (!added && fromRecord.added === \"是\") {\n            fromRecord.added = \"\";\n            change = true;\n          }\n\n          rows.push(fromRecord);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      if (change) {\n        //避免循环触发dataSourceChange\n        fromComponent.disableDataSourceChange = true;\n        fromComponent.dataSource = rows;\n      }\n    },\n    onReceivableSelectChange: function onReceivableSelectChange() {\n      var count = 0;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.$refs.rpCheckReceivableList.selectionRows[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var row = _step4.value;\n          if (row.added !== \"是\") count++;\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      this.selectedReceivableCount = count;\n    },\n    onEntryList1SelectChange: function onEntryList1SelectChange() {\n      this.selectedEntryCount1 = this.$refs.rpCheckEntryList1.selectedRowKeys.length;\n    },\n    onEntryList1DataSourceChange: function onEntryList1DataSourceChange() {\n      this.entryCount1 = this.$refs.rpCheckEntryList1.dataSource.length;\n    },\n    onReceiptDataSourceChange: function onReceiptDataSourceChange() {\n      this.paymentCount = this.$refs.rpCheckReceiptList.dataSource.length;\n      this.makeAdded(this.$refs.rpCheckReceiptList, this.$refs.rpCheckEntryList2);\n    },\n    onReceiptSelectChange: function onReceiptSelectChange() {\n      var count = 0;\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = this.$refs.rpCheckReceiptList.selectionRows[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var row = _step5.value;\n          if (row.added !== \"是\") count++;\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      this.selectedReceiptCount = count;\n    },\n    onEntryList2SelectChange: function onEntryList2SelectChange() {\n      this.selectedEntryCount2 = this.$refs.rpCheckEntryList2.selectedRowKeys.length;\n    },\n    onEntryList2DataSourceChange: function onEntryList2DataSourceChange() {\n      this.entryCount2 = this.$refs.rpCheckEntryList2.dataSource.length;\n    },\n    handleEntryList1Add: function handleEntryList1Add() {\n      var _this$$refs$rpCheckEn;\n\n      var maxEntryNo = 100;\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = this.$refs.rpCheckEntryList1.dataSource[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var row = _step6.value;\n          if (maxEntryNo < row.entryNo) maxEntryNo = row.entryNo;\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6.return != null) {\n            _iterator6.return();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      var rows = [];\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = this.$refs.rpCheckReceivableList.selectionRows[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var _row = _step7.value;\n\n          if (_row.added !== \"是\") {\n            rows.push({\n              entryNo: ++maxEntryNo,\n              checkSide: \"1\",\n              sourceType: \"fin_receivable\",\n              sourceId: _row.id,\n              sourceNo: _row.billNo,\n              uncheckedAmt: _row.uncheckedAmt,\n              amt: _row.uncheckedAmt\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7.return != null) {\n            _iterator7.return();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      (_this$$refs$rpCheckEn = this.$refs.rpCheckEntryList1.dataSource).push.apply(_this$$refs$rpCheckEn, rows);\n\n      this.selectedReceivableCount = 0;\n      this.$refs.rpCheckReceivableList.selectedRowKeys = [];\n      this.$refs.rpCheckReceivableList.selectionRows = [];\n      this.makeAdded(this.$refs.rpCheckReceivableList, this.$refs.rpCheckEntryList1);\n    },\n    handleEntryList1Remove: function handleEntryList1Remove() {\n      if (this.$refs.rpCheckEntryList1.selectionRows === 0) return;\n      var rows = [];\n      var _iteratorNormalCompletion8 = true;\n      var _didIteratorError8 = false;\n      var _iteratorError8 = undefined;\n\n      try {\n        for (var _iterator8 = this.$refs.rpCheckEntryList1.dataSource[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n          var row = _step8.value;\n          var removedRow = {\n            sourceId: \"\"\n          };\n          var _iteratorNormalCompletion9 = true;\n          var _didIteratorError9 = false;\n          var _iteratorError9 = undefined;\n\n          try {\n            for (var _iterator9 = this.$refs.rpCheckEntryList1.selectionRows[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n              removedRow = _step9.value;\n              //移除的\n              if (row.sourceId === removedRow.sourceId) break;\n            } //不移除的\n\n          } catch (err) {\n            _didIteratorError9 = true;\n            _iteratorError9 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion9 && _iterator9.return != null) {\n                _iterator9.return();\n              }\n            } finally {\n              if (_didIteratorError9) {\n                throw _iteratorError9;\n              }\n            }\n          }\n\n          if (row.sourceId !== removedRow.sourceId) rows.push(row);\n        }\n      } catch (err) {\n        _didIteratorError8 = true;\n        _iteratorError8 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion8 && _iterator8.return != null) {\n            _iterator8.return();\n          }\n        } finally {\n          if (_didIteratorError8) {\n            throw _iteratorError8;\n          }\n        }\n      }\n\n      this.$refs.rpCheckEntryList1.dataSource = rows;\n      this.selectedEntryCount1 = 0;\n      this.$refs.rpCheckEntryList1.selectedRowKeys = [];\n      this.$refs.rpCheckEntryList1.selectionRows = [];\n      this.makeAdded(this.$refs.rpCheckReceivableList, this.$refs.rpCheckEntryList1);\n    },\n    handleEntryList2Add: function handleEntryList2Add() {\n      var _this$$refs$rpCheckEn2;\n\n      var maxEntryNo = 200;\n      var _iteratorNormalCompletion10 = true;\n      var _didIteratorError10 = false;\n      var _iteratorError10 = undefined;\n\n      try {\n        for (var _iterator10 = this.$refs.rpCheckEntryList2.dataSource[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n          var row = _step10.value;\n          if (maxEntryNo < row.entryNo) maxEntryNo = row.entryNo;\n        }\n      } catch (err) {\n        _didIteratorError10 = true;\n        _iteratorError10 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion10 && _iterator10.return != null) {\n            _iterator10.return();\n          }\n        } finally {\n          if (_didIteratorError10) {\n            throw _iteratorError10;\n          }\n        }\n      }\n\n      var rows = [];\n      var _iteratorNormalCompletion11 = true;\n      var _didIteratorError11 = false;\n      var _iteratorError11 = undefined;\n\n      try {\n        for (var _iterator11 = this.$refs.rpCheckReceiptList.selectionRows[Symbol.iterator](), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n          var _row2 = _step11.value;\n\n          if (_row2.added !== \"是\") {\n            rows.push({\n              entryNo: ++maxEntryNo,\n              checkSide: \"2\",\n              sourceType: \"fin_receipt..102\",\n              sourceId: _row2.id,\n              sourceNo: _row2.billNo,\n              uncheckedAmt: _row2.uncheckedAmt,\n              amt: _row2.uncheckedAmt\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError11 = true;\n        _iteratorError11 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion11 && _iterator11.return != null) {\n            _iterator11.return();\n          }\n        } finally {\n          if (_didIteratorError11) {\n            throw _iteratorError11;\n          }\n        }\n      }\n\n      (_this$$refs$rpCheckEn2 = this.$refs.rpCheckEntryList2.dataSource).push.apply(_this$$refs$rpCheckEn2, rows);\n\n      this.selectedReceiptCount = 0;\n      this.$refs.rpCheckReceiptList.selectedRowKeys = [];\n      this.$refs.rpCheckReceiptList.selectionRows = [];\n      this.makeAdded(this.$refs.rpCheckReceiptList, this.$refs.rpCheckEntryList2);\n    },\n    handleEntryList2Remove: function handleEntryList2Remove() {\n      if (this.$refs.rpCheckEntryList2.selectionRows === 0) return;\n      var rows = [];\n      var _iteratorNormalCompletion12 = true;\n      var _didIteratorError12 = false;\n      var _iteratorError12 = undefined;\n\n      try {\n        for (var _iterator12 = this.$refs.rpCheckEntryList2.dataSource[Symbol.iterator](), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {\n          var row = _step12.value;\n          var removedRow = {\n            sourceId: \"\"\n          };\n          var _iteratorNormalCompletion13 = true;\n          var _didIteratorError13 = false;\n          var _iteratorError13 = undefined;\n\n          try {\n            for (var _iterator13 = this.$refs.rpCheckEntryList2.selectionRows[Symbol.iterator](), _step13; !(_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done); _iteratorNormalCompletion13 = true) {\n              removedRow = _step13.value;\n              //移除的\n              if (row.sourceId === removedRow.sourceId) break;\n            } //不移除的\n\n          } catch (err) {\n            _didIteratorError13 = true;\n            _iteratorError13 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion13 && _iterator13.return != null) {\n                _iterator13.return();\n              }\n            } finally {\n              if (_didIteratorError13) {\n                throw _iteratorError13;\n              }\n            }\n          }\n\n          if (row.sourceId !== removedRow.sourceId) rows.push(row);\n        }\n      } catch (err) {\n        _didIteratorError12 = true;\n        _iteratorError12 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion12 && _iterator12.return != null) {\n            _iterator12.return();\n          }\n        } finally {\n          if (_didIteratorError12) {\n            throw _iteratorError12;\n          }\n        }\n      }\n\n      this.$refs.rpCheckEntryList2.dataSource = rows;\n      this.selectedEntryCount2 = 0;\n      this.$refs.rpCheckEntryList2.selectedRowKeys = [];\n      this.$refs.rpCheckEntryList2.selectionRows = [];\n      this.makeAdded(this.$refs.rpCheckReceiptList, this.$refs.rpCheckEntryList2);\n    },\n\n    /** 关闭弹窗，并将所有JEditableTable实例回归到初始状态 */\n    close: function close() {\n      this.visible = false;\n      this.$emit('close');\n    },\n    handleOk: function handleOk() {\n      var _this3 = this;\n\n      // 触发表单验证\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          var formData = _this3.classifyIntoFormData(values);\n\n          return _this3.request(formData, false);\n        }\n      });\n    },\n\n    /** 整理成formData */\n    classifyIntoFormData: function classifyIntoFormData(formValue) {\n      var main = Object.assign(this.model, formValue);\n      return _objectSpread({}, main, {\n        // 展开\n        finReceivableCheckEntryList: this.$refs.rpCheckEntryList1.dataSource.concat(this.$refs.rpCheckEntryList2.dataSource)\n      });\n    },\n\n    /** 发起请求，自动判断是执行新增还是修改操作 */\n    request: function request(formData, isSubmit) {\n      var _this4 = this;\n\n      var url = this.url.add,\n          method = 'post';\n\n      if (this.model.id) {\n        url = this.url.edit;\n        method = 'put';\n      }\n\n      this.confirmLoading = true;\n      httpAction(url, formData, method).then(function (res) {\n        if (res.success) {\n          _this4.$message.success(res.message);\n\n          _this4.$emit('ok');\n\n          _this4.close();\n        } else {\n          _this4.$message.warning(res.message);\n        }\n      }).catch(function (e) {\n        if (isSubmit) _this4.form.setFieldsValue({\n          billProcStatus: '12'\n        });\n      }).finally(function () {\n        _this4.confirmLoading = false;\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    handleSave: function handleSave() {\n      this.handleOk();\n    },\n    handleSubmit: function handleSubmit() {\n      var _this5 = this;\n\n      //处理状态=编辑完成\n      this.form.setFieldsValue({\n        billProcStatus: '13'\n      }); //出错时要恢复billProcStatus为\"12\"，所以下面未直接调用handleSave()！\n      // 触发表单验证\n\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          var formData = _this5.classifyIntoFormData(values);\n\n          return _this5.request(formData, true);\n        }\n      });\n    },\n    handleApproved: function handleApproved() {\n      var that = this;\n      putAction(that.url.approve, {\n        id: that.model.id\n      }).then(function (res) {\n        if (res.success) {\n          that.$message.success(res.message);\n          that.$emit('ok');\n          that.close();\n        } else {\n          that.$message.warning(res.message);\n        }\n      });\n    },\n    popupCallback: function popupCallback(row) {\n      this.form.setFieldsValue(pick(row, 'billNo', 'billDate', 'customerId', 'remark', 'billProcStatus', 'isApproved', 'isClosed', 'isVoided', 'effectiveTime', 'approverId', 'flowId', 'createTime', 'createBy', 'sysOrgCode', 'updateTime', 'updateBy'));\n    }\n  }\n};",{"version":3,"sources":["ReceivableCheckModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <j-modal\r\n    :title=\"'应收核销 - ' + title\"\r\n    :width=\"width\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    :maskClosable=\"false\"\r\n    :keyboard=\"false\"\r\n    :forceRender=\"true\"\r\n    switchFullscreen\r\n    @cancel=\"handleCancel\">\r\n\r\n    <template slot=\"footer\">\r\n      <a-button v-if=\"action!=='detail'\" key=\"cancel\" @click=\"handleCancel\">取消</a-button>\r\n      <a-button v-if=\"!readOnly\" key=\"save\"   @click=\"handleSave\" type=\"primary\" :loading=\"confirmLoading\">保存</a-button>\r\n      <a-button v-if=\"!readOnly\" :disabled=\"totalAmt1!==totalAmt2\" key=\"submit\" @click=\"handleSubmit\" type=\"primary\" :loading=\"confirmLoading\">提交</a-button>\r\n      <a-button v-if=\"action==='detail'\"  key=\"close\"  @click=\"handleCancel\" type=\"primary\">关闭</a-button>\r\n      <a-button v-if=\"action==='approve'\"  key=\"approved\"  @click=\"handleApproved\" type=\"primary\">审核通过</a-button>\r\n    </template>\r\n\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <!-- 主表单区域 -->\r\n      <a-form :form=\"form\">\r\n        <a-row>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"处理状态\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['billProcStatus', validatorRules.billProcStatus]\" :trigger-change=\"true\" dictCode=\"x_bill_proc_status\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"4\">\r\n            <a-form-item label=\"是否通过\" :labelCol=\"spans.labelCol6\" :wrapperCol=\"spans.wrapperCol6\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['isApproved', validatorRules.isApproved]\" :trigger-change=\"true\" dictCode=\"yn\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"4\">\r\n            <a-form-item label=\"是否关闭\" :labelCol=\"spans.labelCol6\" :wrapperCol=\"spans.wrapperCol6\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['isClosed', validatorRules.isClosed]\" :trigger-change=\"true\" dictCode=\"yn\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"4\">\r\n            <a-form-item label=\"是否作废\" :labelCol=\"spans.labelCol6\" :wrapperCol=\"spans.wrapperCol6\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['isVoided', validatorRules.isVoided]\" :trigger-change=\"true\" dictCode=\"yn\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"4\">\r\n            <a @click=\"()=> this.moreStatus = !this.moreStatus\" style=\"float: right; margin-top: 10px\">\r\n              {{ moreStatus ? '收起' : '展开' }}\r\n              <a-icon :type=\"moreStatus ? 'up' : 'down'\"/>\r\n            </a>\r\n          </a-col>\r\n        </a-row>\r\n        <a-row v-show=\"moreStatus\">\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"创建时间\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-date :readOnly=\"true\" v-decorator=\"[ 'createTime', validatorRules.createTime]\" :trigger-change=\"true\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"创建人\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['createBy', validatorRules.createBy]\" :trigger-change=\"true\" dictCode=\"sys_user,realname,username\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"创建部门\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['sysOrgCode', validatorRules.sysOrgCode]\" :trigger-change=\"true\" dictCode=\"sys_depart,depart_name,org_code\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"生效时间\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-date :readOnly=\"true\" v-decorator=\"[ 'effectiveTime', validatorRules.effectiveTime]\" :showTime=\"true\" :trigger-change=\"true\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"审核人\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['approverId', validatorRules.approverId]\" :trigger-change=\"true\" dictCode=\"sys_user,realname,username\" />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"流程\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <a-input :readOnly=\"true\" v-decorator=\"[ 'flowId', validatorRules.flowId]\" ></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"修改时间\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-date :readOnly=\"true\" v-decorator=\"[ 'updateTime', validatorRules.updateTime]\" :trigger-change=\"true\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"修改人\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled type=\"list\" v-decorator=\"['updateBy', validatorRules.updateBy]\" :trigger-change=\"true\" dictCode=\"sys_user,realname,username\" />\r\n            </a-form-item>\r\n          </a-col>\r\n        </a-row>\r\n        <a-row>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"单据编号\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <a-input :readOnly=\"true\" v-decorator=\"[ 'billNo', validatorRules.billNo]\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item label=\"单据日期\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-date :readOnly=\"readOnly\" v-decorator=\"[ 'billDate', validatorRules.billDate]\" :trigger-change=\"true\" style=\"width: 100%\"/>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <a-form-item  label=\"制单人\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n              <j-dict-select-tag disabled  type=\"list\" v-decorator=\"['createBy', validatorRules.createBy]\" :trigger-change=\"true\" dictCode=\"sys_user,realname,username\" />\r\n            </a-form-item>\r\n          </a-col>\r\n        </a-row>\r\n        <a-row>\r\n          <a-tooltip :title=\"!readOnly && entryCount1+entryCount2>0 ? '有核销项时不能改变客户！':''\" placement=\"bottom\">\r\n            <a-col :span=\"8\">\r\n              <a-form-item label=\"客户\" :labelCol=\"spans.labelCol3\" :wrapperCol=\"spans.wrapperCol3\">\r\n                  <j-dict-select-tag :disabled=\"readOnly || entryCount1+entryCount2>0\" type=\"list\"  @change=\"onCustomerChange\"\r\n                                     v-decorator=\"['customerId', validatorRules.customerId]\" :trigger-change=\"true\" dictCode=\"bas_customer,name,id\"/>\r\n              </a-form-item>\r\n            </a-col>\r\n            </a-tooltip>\r\n          <a-col :span=\"16\">\r\n            <a-form-item label=\"备注\" :labelCol=\"spans.labelCol\" :wrapperCol=\"spans.wrapperCol\">\r\n              <a-textarea :readOnly=\"readOnly\" v-decorator=\"[ 'remark', validatorRules.remark]\" :rows=\"1\" autoSize></a-textarea>\r\n            </a-form-item>\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n\r\n      <!-- 子表区域 -->\r\n      <a-divider style=\"margin:6px 0 6px 0;\"></a-divider>\r\n      <split-pane v-if=\"!readOnly\" :min-percent='35' :default-percent='50' split=\"vertical\"\r\n                  :style=\"'width:100%; height:' + splitPaneHeight + 'px'\">\r\n        <template slot=\"paneL\">\r\n          <a-row>\r\n            <a-col span=\"20\">\r\n              <br>\r\n              <rpCheckReceivable-List ref=\"rpCheckReceivableList\"\r\n                                   @selectChange=\"onReceivableSelectChange\"\r\n                                   @dataSourceChange=\"onReceivableDataSourceChange\"\r\n                                   :style=\"'height:'+ReceivableHeight+'px'\"/>\r\n            </a-col>\r\n            <a-col span=\"4\">\r\n              <br><br><br>\r\n              <a-button :disabled=\"selectedReceivableCount===0\" type=\"link\" @click=\"handleEntryList1Add\" icon=\"right\">添加</a-button>\r\n              <br><br>\r\n              <a-button :disabled=\"selectedEntryCount1===0\" type=\"link\" @click=\"handleEntryList1Remove\" icon=\"left\">移除</a-button>\r\n            </a-col>\r\n          </a-row>\r\n          <a-row>\r\n            <a-col span=\"20\">\r\n              <br style=\"line-height: 50%\">\r\n              <rpCheckReceipt-list ref=\"rpCheckReceiptList\"\r\n                                   @selectChange=\"onReceiptSelectChange\"\r\n                                   @dataSourceChange=\"onReceiptDataSourceChange\"/>\r\n            </a-col>\r\n            <a-col span=\"3\">\r\n              <br><br><br>\r\n              <a-button :disabled=\"selectedReceiptCount===0\" type=\"link\" @click=\"handleEntryList2Add\" icon=\"right\">添加</a-button>\r\n              <br><br>\r\n              <a-button :disabled=\"selectedEntryCount2===0\" type=\"link\" @click=\"handleEntryList2Remove\" icon=\"left\">移除</a-button>\r\n            </a-col>\r\n          </a-row>\r\n        </template>\r\n        <template slot=\"paneR\">\r\n          <a-icon type=\"column-width\" />\r\n          <rpCheckEntry-list ref=\"rpCheckEntryList1\"\r\n                             checkType=\"101\"\r\n                             checkSide=\"1\"\r\n                             :readOnly=\"readOnly\"\r\n                             @totalAmtChange=\"totalAmt => { this.totalAmt1 = totalAmt; }\"\r\n                             @selectChange=\"onEntryList1SelectChange\"\r\n                             @dataSourceChange=\"onEntryList1DataSourceChange\"\r\n                             :style=\"'height:'+ReceivableHeight+'px'\"/>\r\n          <br style=\"line-height: 50%\">\r\n          <rpCheckEntry-list ref=\"rpCheckEntryList2\"\r\n                             checkType=\"101\"\r\n                             checkSide=\"2\"\r\n                             :readOnly=\"readOnly\"\r\n                             @totalAmtChange=\"totalAmt => { this.totalAmt2 = totalAmt; }\"\r\n                             @selectChange=\"onEntryList2SelectChange\"\r\n                             @dataSourceChange=\"onEntryList2DataSourceChange\"/>\r\n          <a-alert v-if=\"totalAmt1!==totalAmt2\" message=\"双方核销金额合计不相等！\" type=\"warning\" banner />\r\n        </template>\r\n      </split-pane>\r\n      <template v-else>\r\n        <rpCheckEntry-list ref=\"rpCheckEntryList1\"\r\n                           checkType=\"101\"\r\n                           checkSide=\"1\"\r\n                           :readOnly=\"readOnly\"\r\n                           @totalAmtChange=\"totalAmt => { this.totalAmt1 = totalAmt; }\"\r\n                           @selectChange=\"onEntryList1SelectChange\"\r\n                           @dataSourceChange=\"onEntryList1DataSourceChange\"/>\r\n        <br style=\"line-height: 50%\">\r\n        <rpCheckEntry-list ref=\"rpCheckEntryList2\"\r\n                           checkType=\"101\"\r\n                           checkSide=\"2\"\r\n                           :readOnly=\"readOnly\"\r\n                           @totalAmtChange=\"totalAmt => { this.totalAmt2 = totalAmt; }\"\r\n                           @selectChange=\"onEntryList2SelectChange\"\r\n                           @dataSourceChange=\"onEntryList2DataSourceChange\"/>\r\n        <a-alert v-if=\"totalAmt1!==totalAmt2\" message=\"双方核销金额合计不相等！\" type=\"warning\" banner />\r\n      </template>\r\n    </a-spin>\r\n  </j-modal>\r\n</template>\r\n\r\n<script>\r\n  import pick from 'lodash.pick'\r\n  import JDate from '@/components/jeecg/JDate'\r\n  import JDictSelectTag from \"@/components/dict/JDictSelectTag\"\r\n  import { getAction, putAction, httpAction } from '@api/manage'\r\n  import splitPane from 'vue-splitpane';\r\n  import { getFormatDate } from \"../../utils/util\"\r\n  import RpCheckEntryList from \"./RpCheck/RpCheckEntryList\";\r\n  import RpCheckReceivableList from \"./RpCheck/RpCheckReceivableList\";\r\n  import RpCheckReceiptList from \"./RpCheck/RpCheckReceiptList\";\r\n\r\n  export default {\r\n    name: 'ReceivableCheckModal',\r\n    mixins: [],\r\n    components: {\r\n      JDate,\r\n      JDictSelectTag,\r\n      RpCheckReceivableList,\r\n      RpCheckReceiptList,\r\n      RpCheckEntryList,\r\n      splitPane\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        action: \"\",\r\n        title: '操作',\r\n        width: '1200px',\r\n        visible: false,\r\n        form: this.$form.createForm(this),\r\n        confirmLoading: false,\r\n        model: {},\r\n\r\n        moreStatus: false,\r\n        spans: {\r\n          labelCol: { span: 3 },\r\n          wrapperCol: { span: 21 },\r\n          labelCol1: { span: 2 },\r\n          wrapperCol1: { span: 22 },\r\n          labelCol2: { span: 4 },\r\n          wrapperCol2: { span: 20 },\r\n          labelCol3: { span: 6 },\r\n          wrapperCol3: { span: 18 },\r\n          labelCol6: { span: 12 },\r\n          wrapperCol6: { span: 12 }\r\n        },\r\n\r\n        validatorRules: {\r\n          billNo: {rules: [{required: true, message: '请输入单据编号!'}]},\r\n          billDate: {rules: [{required: true, message: '请输入单据日期!'}]},\r\n          receivableCheckType: {rules: []},\r\n          customerId: {rules: []},\r\n          remark: {rules: []},\r\n          billProcStatus: {rules: []},\r\n          isApproved: {rules: []},\r\n          isClosed: {rules: []},\r\n          isVoided: {rules: []},\r\n          effectiveTime: {rules: []},\r\n          approverId: {rules: []},\r\n          flowId: {rules: []},\r\n          createTime: {rules: []},\r\n          createBy: {rules: []},\r\n          sysOrgCode: {rules: []},\r\n          updateTime: {rules: []},\r\n          updateBy: {rules: []},\r\n        },\r\n\r\n        totalAmt1:0,\r\n        entryCount1: 0,\r\n        ReceivableCount: 0,\r\n        selectedEntryCount1: 0,\r\n        selectedReceivableCount: 0,\r\n        totalAmt2:0,\r\n        entryCount2: 0,\r\n        paymentCount: 0,\r\n        selectedEntryCount2: 0,\r\n        selectedReceiptCount: 0,\r\n\r\n        url: {\r\n          add: \"/finance/finReceivableCheck/add\",\r\n          edit: \"/finance/finReceivableCheck/edit\",\r\n          approve: \"/finance/finReceivableCheck/approve\",\r\n          finRpCheckEntry: {\r\n            list: '/finance/finReceivableCheck/queryFinReceivableCheckEntryByMainId'\r\n          },\r\n        }\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      readOnly: function() {\r\n        return this.action !== \"add\" && this.action !== \"edit\"\r\n      },\r\n      /**\r\n       * @return {number}\r\n       */\r\n      ReceivableHeight: function () {\r\n        let a = this.ReceivableCount === 0 ? 4.5:this.ReceivableCount,\r\n            b = this.entryCount1 === 0 ? 4.5:this.entryCount1;\r\n        return (a > b ? a : b) * 38 + 150;\r\n      },\r\n      splitPaneHeight: function () {\r\n        let a = this.paymentCount === 0 ? 4.5:this.paymentCount,\r\n          b = this.entryCount2 === 0 ? 4.5:this.entryCount2;\r\n        return this.ReceivableHeight + (a > b ? a : b) * 38 + 180;\r\n      },\r\n    },\r\n\r\n    methods: {\r\n      addInit() {\r\n        this.model = {};\r\n        //应收核销类型：收款核应收\r\n        this.model.receivableCheckType = '101';\r\n        //处理状态：编辑中\r\n        this.model.billProcStatus = '12';\r\n\r\n        // 请求后台的填值规则接口地址\r\n        const url = '/sys/fillRule/executeRuleByCode/'\r\n        const ruleCode = 'receivable_check_bill_no'\r\n        const that = this\r\n        putAction(url + ruleCode, {}).then(res => {\r\n          // 执行成功，获取返回的值，并赋到页面上\r\n          if (res.success) {\r\n            that.$nextTick(() => {\r\n              that.form.setFieldsValue({'billNo':res.result, 'billDate':getFormatDate()})\r\n            })\r\n          }\r\n        })\r\n      },\r\n\r\n      /** 列表点击新增按钮时调用此方法 */\r\n      add() {\r\n        this.addInit();\r\n        this.edit(this.model);\r\n      },\r\n\r\n      resetModal() {\r\n        // reset modal\r\n        this.entryCount1 = 0;\r\n        this.selectedEntryCount1= 0;\r\n        this.selectedReceivableCount = 0;\r\n        this.entryCount2 = 0;\r\n        this.selectedEntryCount2 = 0;\r\n        this.selectedReceiptCount = 0;\r\n        this.form.resetFields();\r\n        this.$nextTick(() => {\r\n          this.$refs.rpCheckEntryList1.resetTable();\r\n          this.$refs.rpCheckEntryList2.resetTable();\r\n          if (!this.readOnly) {\r\n            this.$refs.rpCheckReceivableList.resetTable();\r\n            this.$refs.rpCheckReceiptList.resetTable();\r\n          }\r\n        });\r\n      },\r\n\r\n      /** 列表点击了编辑（修改）按钮时调用此方法 */\r\n      edit(record) {\r\n        this.resetModal();\r\n\r\n        this.model = Object.assign({}, record);\r\n        this.visible = true;\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model,'billNo','billDate','customerId','remark','billProcStatus','isApproved','isClosed','isVoided','effectiveTime','approverId','flowId','createTime','createBy','sysOrgCode','updateTime','updateBy'))\r\n        })\r\n\r\n        // 加载子表数据\r\n        this.$nextTick(() => {\r\n          if (this.model.id) {\r\n            queryCheckEntry(this);\r\n            this.onCustomerChange(this.model.customerId);\r\n          }\r\n        });\r\n\r\n        /** 查询数据 */\r\n        function queryCheckEntry(that) {\r\n          let url = that.url.finRpCheckEntry.list;\r\n          let params = { id: that.model.id };\r\n          that.$refs.rpCheckEntryList1.loading = true;\r\n          that.$refs.rpCheckEntryList2.loading = true;\r\n          getAction(url, params).then(res => {\r\n            let rows1 = [], rows2 = [];\r\n            for (let row of res.result || []) {\r\n              if (row.checkSide === \"1\")\r\n                rows1.push(row)\r\n              else\r\n                rows2.push(row);\r\n            }\r\n            that.$refs.rpCheckEntryList1.dataSource = rows1;\r\n            that.$refs.rpCheckEntryList2.dataSource = rows2;\r\n          }).finally(() => {\r\n            that.$refs.rpCheckEntryList1.loading = false;\r\n            that.$refs.rpCheckEntryList2.loading = false;\r\n          });\r\n        }\r\n      },\r\n\r\n      onCustomerChange(val){\r\n        if (!this.readOnly && val) {\r\n          let params = {customerId: val};\r\n          this.$refs.rpCheckReceivableList.queryParam = params;\r\n          this.$refs.rpCheckReceivableList.loadData(1);\r\n          this.$refs.rpCheckReceiptList.queryParam = params;\r\n          this.$refs.rpCheckReceiptList.loadData(1);\r\n        }\r\n      },\r\n\r\n      onReceivableDataSourceChange() {\r\n        this.ReceivableCount = this.$refs.rpCheckReceivableList.dataSource.length;\r\n        this.makeAdded(this.$refs.rpCheckReceivableList, this.$refs.rpCheckEntryList1);\r\n      },\r\n\r\n      //注意：\r\n      // rpCheckReceivableList与rpCheckReceiptList的loadData(),由于其中getAction是异步执行，\r\n      // 所以如果在其后调用本函数将无效（此时rpCheckReceivableList.dataSource还是空的）。\r\n      makeAdded(fromComponent, toComponent) {\r\n        let rows = [];\r\n        let change = false;\r\n        for (let fromRecord of fromComponent.dataSource) {\r\n          let added = false;\r\n          for (let toRecord of toComponent.dataSource) {\r\n            if (fromRecord.id === toRecord.sourceId) {\r\n              added = true;\r\n              if (fromRecord.added !== \"是\") {\r\n                fromRecord.added = \"是\";\r\n                change = true;\r\n              }\r\n              break;\r\n            }\r\n          }\r\n          // 以前是added，但现在不是\r\n          if (!added && fromRecord.added === \"是\") {\r\n            fromRecord.added = \"\";\r\n            change = true;\r\n          }\r\n          rows.push(fromRecord);\r\n        }\r\n        if (change) {\r\n          //避免循环触发dataSourceChange\r\n          fromComponent.disableDataSourceChange = true;\r\n          fromComponent.dataSource = rows;\r\n        }\r\n      },\r\n\r\n      onReceivableSelectChange(){\r\n        let count = 0;\r\n        for (let row of  this.$refs.rpCheckReceivableList.selectionRows) {\r\n          if (row.added !== \"是\") count++;\r\n        }\r\n        this.selectedReceivableCount = count;\r\n      },\r\n\r\n      onEntryList1SelectChange() {\r\n        this.selectedEntryCount1 = this.$refs.rpCheckEntryList1.selectedRowKeys.length;\r\n      },\r\n\r\n      onEntryList1DataSourceChange(){\r\n        this.entryCount1 = this.$refs.rpCheckEntryList1.dataSource.length;\r\n      },\r\n\r\n      onReceiptDataSourceChange() {\r\n        this.paymentCount = this.$refs.rpCheckReceiptList.dataSource.length;\r\n        this.makeAdded(this.$refs.rpCheckReceiptList, this.$refs.rpCheckEntryList2);\r\n      },\r\n\r\n      onReceiptSelectChange(){\r\n        let count = 0;\r\n        for (let row of this.$refs.rpCheckReceiptList.selectionRows) {\r\n          if (row.added !== \"是\") count++;\r\n        }\r\n        this.selectedReceiptCount = count;\r\n      },\r\n\r\n      onEntryList2SelectChange() {\r\n        this.selectedEntryCount2 = this.$refs.rpCheckEntryList2.selectedRowKeys.length;\r\n      },\r\n\r\n      onEntryList2DataSourceChange(){\r\n        this.entryCount2 = this.$refs.rpCheckEntryList2.dataSource.length;\r\n      },\r\n\r\n      handleEntryList1Add() {\r\n        let maxEntryNo = 100;\r\n        for(let row of this.$refs.rpCheckEntryList1.dataSource) {\r\n          if (maxEntryNo < row.entryNo)  maxEntryNo = row.entryNo;\r\n        }\r\n\r\n        let rows = [];\r\n        for (let row of this.$refs.rpCheckReceivableList.selectionRows) {\r\n          if (row.added !== \"是\") {\r\n            rows.push({\r\n              entryNo: ++maxEntryNo,\r\n              checkSide: \"1\",\r\n              sourceType: \"fin_receivable\",\r\n              sourceId: row.id,\r\n              sourceNo: row.billNo,\r\n              uncheckedAmt: row.uncheckedAmt,\r\n              amt: row.uncheckedAmt\r\n            });\r\n          }\r\n        }\r\n        this.$refs.rpCheckEntryList1.dataSource.push(...rows);\r\n        this.selectedReceivableCount = 0;\r\n        this.$refs.rpCheckReceivableList.selectedRowKeys = [];\r\n        this.$refs.rpCheckReceivableList.selectionRows = [];\r\n        this.makeAdded(this.$refs.rpCheckReceivableList, this.$refs.rpCheckEntryList1);\r\n      },\r\n\r\n      handleEntryList1Remove() {\r\n        if (this.$refs.rpCheckEntryList1.selectionRows === 0) return;\r\n\r\n        let rows = [];\r\n        for (let row of this.$refs.rpCheckEntryList1.dataSource) {\r\n          let removedRow = {sourceId:\"\"};\r\n          for (removedRow of this.$refs.rpCheckEntryList1.selectionRows) {\r\n            //移除的\r\n            if (row.sourceId === removedRow.sourceId) break;\r\n          }\r\n          //不移除的\r\n          if (row.sourceId !== removedRow.sourceId) rows.push(row);\r\n        }\r\n        this.$refs.rpCheckEntryList1.dataSource = rows;\r\n        this.selectedEntryCount1 = 0;\r\n        this.$refs.rpCheckEntryList1.selectedRowKeys = [];\r\n        this.$refs.rpCheckEntryList1.selectionRows = [];\r\n        this.makeAdded(this.$refs.rpCheckReceivableList, this.$refs.rpCheckEntryList1);\r\n      },\r\n\r\n      handleEntryList2Add() {\r\n        let maxEntryNo = 200;\r\n        for(let row of this.$refs.rpCheckEntryList2.dataSource) {\r\n          if (maxEntryNo < row.entryNo)  maxEntryNo = row.entryNo;\r\n        }\r\n\r\n        let rows = [];\r\n        for (let row of this.$refs.rpCheckReceiptList.selectionRows) {\r\n          if (row.added !== \"是\") {\r\n            rows.push({\r\n              entryNo: ++maxEntryNo,\r\n              checkSide: \"2\",\r\n              sourceType: \"fin_receipt..102\",\r\n              sourceId: row.id,\r\n              sourceNo: row.billNo,\r\n              uncheckedAmt: row.uncheckedAmt,\r\n              amt: row.uncheckedAmt\r\n            });\r\n          }\r\n        }\r\n        this.$refs.rpCheckEntryList2.dataSource.push(...rows);\r\n        this.selectedReceiptCount = 0;\r\n        this.$refs.rpCheckReceiptList.selectedRowKeys = [];\r\n        this.$refs.rpCheckReceiptList.selectionRows = [];\r\n        this.makeAdded(this.$refs.rpCheckReceiptList, this.$refs.rpCheckEntryList2);\r\n      },\r\n\r\n      handleEntryList2Remove() {\r\n        if (this.$refs.rpCheckEntryList2.selectionRows === 0) return;\r\n\r\n        let rows = [];\r\n        for (let row of this.$refs.rpCheckEntryList2.dataSource) {\r\n          let removedRow = {sourceId:\"\"};\r\n          for (removedRow of this.$refs.rpCheckEntryList2.selectionRows) {\r\n            //移除的\r\n            if (row.sourceId === removedRow.sourceId) break;\r\n          }\r\n          //不移除的\r\n          if (row.sourceId !== removedRow.sourceId) rows.push(row);\r\n        }\r\n        this.$refs.rpCheckEntryList2.dataSource = rows;\r\n        this.selectedEntryCount2 = 0;\r\n        this.$refs.rpCheckEntryList2.selectedRowKeys = [];\r\n        this.$refs.rpCheckEntryList2.selectionRows = [];\r\n        this.makeAdded(this.$refs.rpCheckReceiptList, this.$refs.rpCheckEntryList2);\r\n      },\r\n\r\n      /** 关闭弹窗，并将所有JEditableTable实例回归到初始状态 */\r\n      close() {\r\n        this.visible = false\r\n        this.$emit('close')\r\n      },\r\n\r\n      handleOk () {\r\n        // 触发表单验证\r\n        this.form.validateFields((err, values) => {\r\n          if (!err) {\r\n            let formData = this.classifyIntoFormData(values);\r\n            return this.request(formData, false)\r\n          }\r\n        })\r\n      },\r\n\r\n      /** 整理成formData */\r\n      classifyIntoFormData(formValue) {\r\n        let main = Object.assign(this.model, formValue)\r\n        return {\r\n          ...main, // 展开\r\n          finReceivableCheckEntryList: this.$refs.rpCheckEntryList1.dataSource.concat(this.$refs.rpCheckEntryList2.dataSource),\r\n        }\r\n      },\r\n\r\n      /** 发起请求，自动判断是执行新增还是修改操作 */\r\n      request(formData, isSubmit) {\r\n        let url = this.url.add, method = 'post'\r\n        if (this.model.id) {\r\n          url = this.url.edit\r\n          method = 'put'\r\n        }\r\n\r\n        this.confirmLoading = true;\r\n        httpAction(url, formData, method).then((res) => {\r\n          if (res.success) {\r\n            this.$message.success(res.message)\r\n            this.$emit('ok')\r\n            this.close()\r\n          } else {\r\n            this.$message.warning(res.message)\r\n          }\r\n        }).catch(e => {\r\n           if (isSubmit)  this.form.setFieldsValue({billProcStatus:'12'});\r\n        }).finally(() => {\r\n          this.confirmLoading = false\r\n        })\r\n      },\r\n\r\n\r\n      handleCancel () {\r\n        this.close()\r\n      },\r\n      handleSave() {\r\n        this.handleOk()\r\n      },\r\n\r\n      handleSubmit() {\r\n        //处理状态=编辑完成\r\n        this.form.setFieldsValue({billProcStatus:'13'})\r\n\r\n        //出错时要恢复billProcStatus为\"12\"，所以下面未直接调用handleSave()！\r\n        // 触发表单验证\r\n        this.form.validateFields((err, values) => {\r\n          if (!err) {\r\n            let formData = this.classifyIntoFormData(values);\r\n            return this.request(formData, true)\r\n          }\r\n        })\r\n      },\r\n\r\n      handleApproved() {\r\n        const that = this;\r\n        putAction(that.url.approve, {id: that.model.id}).then((res) => {\r\n          if (res.success) {\r\n            that.$message.success(res.message);\r\n            that.$emit('ok')\r\n            that.close()\r\n          } else {\r\n            that.$message.warning(res.message);\r\n          }\r\n        })\r\n      },\r\n\r\n      popupCallback(row){\r\n        this.form.setFieldsValue(pick(row,'billNo','billDate','customerId','remark','billProcStatus','isApproved','isClosed','isVoided','effectiveTime','approverId','flowId','createTime','createBy','sysOrgCode','updateTime','updateBy'))\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .ant-row.ant-form-item {\r\n    margin-bottom: 12px;\r\n  }\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/erp/finance/modules"}]}