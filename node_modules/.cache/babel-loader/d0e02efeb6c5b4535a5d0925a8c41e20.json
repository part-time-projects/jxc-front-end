{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\bas\\BasMonthCarryForward.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\erp\\bas\\BasMonthCarryForward.vue","mtime":1648374777607},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction, postAction } from '@/api/manage';\nimport pick from 'lodash.pick';\nexport default {\n  name: \"BasMonthCarryForward\",\n  components: {},\n  data: function data() {\n    return {\n      form: this.$form.createForm(this),\n      title: \"月末结转\",\n      width: 600,\n      visible: true,\n      model: {},\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      confirmLoading: false,\n      url: {\n        list: \"/bas/basBizPeriod/list\",\n        carryForward: \"/bas/basBizPeriod/monthCarryForward\"\n      }\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.loading = true;\n    getAction(this.url.list, {}).then(function (res) {\n      if (res.success) {\n        _this.edit(res.result.records[0]);\n      }\n\n      if (res.code === 510) {\n        _this.$message.warning(res.message);\n      }\n\n      _this.loading = false;\n    });\n  },\n  methods: {\n    edit: function edit(record) {\n      var _this2 = this;\n\n      this.form.resetFields();\n      this.model = Object.assign({}, record);\n      this.$nextTick(function () {\n        _this2.form.setFieldsValue(pick(_this2.model, 'beginYear', 'beginMonth', 'year', 'month'));\n      });\n    },\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n    },\n    handleOk: function handleOk() {\n      var that = this;\n      that.confirmLoading = true;\n      var formData = {\n        year: this.model.year,\n        month: this.model.month\n      };\n      console.log(formData);\n      postAction(this.url.carryForward, formData).then(function (res) {\n        if (res.success) {\n          that.$message.success(res.message);\n          that.$emit('ok');\n        } else {\n          that.$message.warning(res.message);\n        }\n      }).finally(function () {\n        that.confirmLoading = false;\n        that.close();\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    popupCallback: function popupCallback(row) {\n      this.form.setFieldsValue(pick(row, 'beginYear', 'beginMonth', 'year', 'month'));\n    }\n  }\n};",{"version":3,"sources":["BasMonthCarryForward.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <j-modal\r\n    :title=\"title\"\r\n    :width=\"width\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    :destroyOnClose=\"true\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"取消\">\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-form :form=\"form\">\r\n\r\n        <a-form-item label=\"启用年度\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n          <a-input :readOnly=\"true\" v-decorator=\"['beginYear']\" style=\"width: 100%\"/>\r\n        </a-form-item>\r\n        <a-form-item label=\"启用月度\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n          <a-input :readOnly=\"true\" v-decorator=\"['beginMonth']\" style=\"width: 100%\"/>\r\n        </a-form-item>\r\n        <a-form-item label=\"当前年度\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n          <a-input :readOnly=\"true\" v-decorator=\"['year']\" style=\"width: 100%\"/>\r\n        </a-form-item>\r\n        <a-form-item label=\"当前月度\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n          <a-input :readOnly=\"true\" v-decorator=\"['month']\" style=\"width: 100%\"/>\r\n        </a-form-item>\r\n\r\n      </a-form>\r\n    </a-spin>\r\n  </j-modal>\r\n</template>\r\n\r\n<script>\r\n\r\n  import { getAction, postAction } from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n\r\n\r\n  export default {\r\n    name: \"BasMonthCarryForward\",\r\n    components: { \r\n    },\r\n    data () {\r\n      return {\r\n        form: this.$form.createForm(this),\r\n        title:\"月末结转\",\r\n        width:600,\r\n        visible: true,\r\n        model: {},\r\n        labelCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 5 },\r\n        },\r\n        wrapperCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 16 },\r\n        },\r\n        confirmLoading: false,\r\n        url: {\r\n          list: \"/bas/basBizPeriod/list\",\r\n          carryForward: \"/bas/basBizPeriod/monthCarryForward\",\r\n        }\r\n      }\r\n    },\r\n    created () {\r\n      this.loading = true;\r\n      getAction(this.url.list, {}).then((res) => {\r\n        if (res.success) {\r\n          this.edit(res.result.records[0])\r\n        }\r\n        if(res.code===510){\r\n          this.$message.warning(res.message)\r\n        }\r\n        this.loading = false;\r\n      })\r\n    },\r\n\r\n    methods: {\r\n      edit (record) {\r\n        this.form.resetFields();\r\n        this.model = Object.assign({}, record);\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model,'beginYear','beginMonth','year','month'))\r\n        })\r\n      },\r\n\r\n      close () {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n      },\r\n\r\n      handleOk () {\r\n        const that = this;\r\n        that.confirmLoading = true;\r\n        let formData = {year: this.model.year, month: this.model.month};\r\n        console.log(formData)\r\n        postAction(this.url.carryForward, formData).then((res)=>{\r\n          if(res.success){\r\n            that.$message.success(res.message);\r\n            that.$emit('ok');\r\n          }else{\r\n            that.$message.warning(res.message);\r\n          }\r\n        }).finally(() => {\r\n          that.confirmLoading = false;\r\n          that.close();\r\n        })\r\n      },\r\n\r\n      handleCancel () {\r\n        this.close()\r\n      },\r\n\r\n      popupCallback(row){\r\n        this.form.setFieldsValue(pick(row,'beginYear','beginMonth','year','month'))\r\n      },\r\n\r\n    }\r\n  }\r\n</script>"],"sourceRoot":"src/views/erp/bas"}]}