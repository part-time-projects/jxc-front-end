{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\thread-loader\\dist\\cjs.js!D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\modules\\online\\cgform\\OnlCgformCopyList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\modules\\online\\cgform\\OnlCgformCopyList.vue","mtime":1648374778123},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1648365139913},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { deleteAction, postAction, getAction } from '@/api/manage';\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport Clipboard from 'clipboard';\nimport { filterObj } from '@/utils/util';\nexport default {\n  name: 'OnlCgformHeadList',\n  mixins: [JeecgListMixin],\n  components: {},\n  data: function data() {\n    return {\n      description: 'Online表单视图',\n      // 表头\n      columns: [{\n        title: '#',\n        dataIndex: '',\n        key: 'rowIndex',\n        width: 60,\n        align: 'center',\n        customRender: function customRender(t, r, index) {\n          return parseInt(index) + 1;\n        }\n      }, {\n        title: '视图表名',\n        align: 'center',\n        dataIndex: 'tableName'\n      }, {\n        title: '视图表描述',\n        align: 'center',\n        dataIndex: 'tableTxt'\n      }, {\n        title: '原表版本',\n        align: 'center',\n        dataIndex: 'tableVersion'\n      }, {\n        title: '视图版本',\n        align: 'center',\n        dataIndex: 'copyVersion'\n      }, {\n        title: '操作',\n        dataIndex: 'action',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      url: {\n        list: '/online/cgform/head/list',\n        delete: '/online/cgform/head/delete',\n        deleteBatch: '/online/cgform/head/deleteBatch',\n        removeRecord: '/online/cgform/head/removeRecord'\n      },\n      tableTypeDictOptions: [],\n      sexDictOptions: [],\n      syncModalVisible: false,\n      syncFormId: '',\n      synMethod: 'normal',\n      syncLoading: false,\n      onlineUrlTitle: '',\n      onlineUrlVisible: false,\n      onlineUrl: '',\n      selectedRowKeys: [],\n      selectedRows: [],\n      physicId: \"\"\n    };\n  },\n  watch: {\n    '$route': function $route() {\n      this.loadData();\n    }\n  },\n  methods: {\n    getQueryParams: function getQueryParams() {\n      //获取查询条件\n      var param = Object.assign({}, this.queryParam, this.isorter, this.filters);\n      param.field = this.getQueryField();\n      param.pageNo = this.ipagination.current;\n      param.pageSize = this.ipagination.pageSize;\n      param.copyType = 1;\n      param.physicId = this.physicId;\n      return filterObj(param);\n    },\n    loadData: function loadData(arg) {\n      var _this = this;\n\n      if (!this.$route.params.code) {\n        return false;\n      }\n\n      this.physicId = this.$route.params.code;\n\n      if (!this.url.list) {\n        this.$message.error(\"请设置url.list属性!\");\n        return;\n      } //加载数据 若传入参数1则加载第一页的内容\n\n\n      if (arg === 1) {\n        this.ipagination.current = 1;\n      }\n\n      var params = this.getQueryParams(); //查询条件\n\n      this.loading = true;\n      getAction(this.url.list, params).then(function (res) {\n        if (res.success) {\n          _this.dataSource = res.result.records;\n          _this.ipagination.total = res.result.total;\n        }\n\n        if (res.code === 510) {\n          _this.$message.warning(res.message);\n        }\n\n        _this.loading = false;\n      });\n    },\n    goPageOnline: function goPageOnline(rd) {\n      if (rd.isTree == 'Y') {\n        this.$router.push({\n          path: '/online/cgformTreeList/' + rd.id\n        });\n      } else {\n        this.$router.push({\n          path: '/online/cgformList/' + rd.id\n        });\n      }\n    },\n    handleOnlineUrlClose: function handleOnlineUrlClose() {\n      this.onlineUrlTitle = '';\n      this.onlineUrlVisible = false;\n    },\n    handleOnlineUrlShow: function handleOnlineUrlShow(record) {\n      if (record.isTree == 'Y') {\n        this.onlineUrl = \"/online/cgformTreeList/\".concat(record.id);\n      } else {\n        this.onlineUrl = \"/online/cgformList/\".concat(record.id);\n      }\n\n      this.onlineUrlVisible = true;\n      this.onlineUrlTitle = '菜单链接[' + record.tableTxt + ']';\n    },\n    handleRemoveRecord: function handleRemoveRecord(id) {\n      var that = this;\n      this.$confirm({\n        title: '确认要移除此记录?',\n        onOk: function onOk() {\n          deleteAction(that.url.removeRecord, {\n            id: id\n          }).then(function (res) {\n            if (res.success) {\n              that.$message.success('移除成功');\n              that.loadData();\n            } else {\n              that.$message.warning(res.message);\n            }\n          });\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    doEnhanceJs: function doEnhanceJs() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      this.$refs.ehjs.show(this.selectedRowKeys[0]);\n    },\n    doEnhanceSql: function doEnhanceSql() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      this.$refs.ehsql.show(this.selectedRowKeys[0]);\n    },\n    doEnhanceJava: function doEnhanceJava() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      this.$refs.ehjava.show(this.selectedRowKeys[0]);\n    },\n    doCgformButton: function doCgformButton() {\n      if (!this.selectedRowKeys || this.selectedRowKeys.length != 1) {\n        this.$message.warning('请先选中一条记录');\n        return;\n      }\n\n      this.$refs.btnList.show(this.selectedRowKeys[0]); //this.$router.push({ path: '/online/cgformButton/' + this.selectedRowKeys[0] })\n    },\n    importOnlineForm: function importOnlineForm() {\n      this.$refs.transd2o.show();\n    },\n    transOk: function transOk() {\n      this.loadData();\n    },\n    onSelectChange: function onSelectChange(keys, rows) {\n      this.selectedRowKeys = keys;\n      this.selectedRows = rows;\n    },\n    onCopyUrl: function onCopyUrl() {\n      var _this2 = this;\n\n      var clipboard = new Clipboard('.copy-this-text');\n      clipboard.on('success', function () {\n        clipboard.destroy();\n\n        _this2.$message.success('复制成功');\n\n        _this2.handleOnlineUrlClose();\n      });\n      clipboard.on('error', function () {\n        _this2.$message.error('该浏览器不支持自动复制');\n\n        clipboard.destroy();\n      });\n    },\n    showMyCopyInfo: function showMyCopyInfo(id) {\n      console.log(\"查看复制表单的信息\", id);\n    },\n    copyConfig: function copyConfig(id) {\n      var _this3 = this;\n\n      postAction(\"\".concat(this.url.copyOnline, \"?code=\").concat(id)).then(function (res) {\n        if (res.success) {\n          _this3.$message.success(\"复制成功\");\n\n          _this3.loadData();\n        } else {\n          _this3.$message.error(\"复制失败>>\" + res.message);\n        }\n      });\n    }\n  }\n};",null]}