{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\thread-loader\\dist\\cjs.js!D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\system\\modules\\UserRecycleBinModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\system\\modules\\UserRecycleBinModal.vue","mtime":1648374778163},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1648365139913},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { putAction, deleteAction, getFileAccessHttpUrl } from \"@/api/manage\"; // 高度封装的请求，请务必使用 superRequest.call(this,{}) 的方式调用\n\nfunction superRequest(options) {\n  var _this = this;\n\n  this.loading = !!options.loading;\n  options.promise.then(function (res) {\n    if (res.success && typeof options.success === 'function') {\n      options.success(res);\n    } else {\n      throw new Error(res.message);\n    }\n  }).catch(function (e) {\n    console.error('查询已删除的用户失败：', e);\n\n    _this.$message.warning('查询已删除的用户失败：' + (e.message || e));\n  }).finally(function () {\n    _this.loading = false;\n  });\n}\n\nexport default {\n  name: 'UserRecycleBinModal',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      title: '用户回收站',\n      loading: false,\n      innerVisible: false,\n      selectedRowKeys: [],\n      dataSource: [],\n      columns: [{\n        title: '#',\n        align: 'center',\n        key: 'rowIndex',\n        width: 80,\n        customRender: function customRender(t, r, i) {\n          return i + 1;\n        }\n      }, {\n        title: '账号',\n        align: 'center',\n        dataIndex: 'username'\n      }, {\n        title: '姓名',\n        align: 'center',\n        dataIndex: 'realname'\n      }, {\n        title: '头像',\n        align: 'center',\n        dataIndex: 'avatar',\n        scopedSlots: {\n          customRender: 'avatarslot'\n        }\n      }, {\n        title: '部门',\n        align: 'center',\n        dataIndex: 'orgCode'\n      }, {\n        title: '操作',\n        align: 'center',\n        dataIndex: 'action',\n        width: 200,\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      url: {\n        getAvatar: function getAvatar(path) {\n          return getFileAccessHttpUrl(\"\".concat(path));\n        },\n        // 回收站操作，get = 获取列表；put = 取回；delete = 彻底删除\n        recycleBin: '/sys/user/recycleBin',\n        putRecycleBin: '/sys/user/putRecycleBin',\n        deleteRecycleBin: '/sys/user/deleteRecycleBin'\n      }\n    };\n  },\n  watch: {\n    visible: {\n      immediate: true,\n      handler: function handler(val) {\n        if (val) {\n          this.loadData();\n        }\n\n        this.innerVisible = val;\n      }\n    },\n    innerVisible: function innerVisible(val) {\n      this.$emit('update:visible', val);\n    }\n  },\n  methods: {\n    loadData: function loadData() {\n      var _this2 = this;\n\n      superRequest.call(this, {\n        loading: true,\n        promise: this.$http.get(this.url.recycleBin),\n        success: function success(res) {\n          return _this2.dataSource = res.result;\n        }\n      });\n    },\n    handleOk: function handleOk() {\n      this.loadData();\n      this.$emit('ok');\n    },\n    handleCancel: function handleCancel() {\n      this.innerVisible = false;\n    },\n    // 还原用户\n    handleRevert: function handleRevert(userIds) {\n      var _this3 = this;\n\n      this.$confirm({\n        title: '恢复用户',\n        content: \"\\u60A8\\u786E\\u5B9A\\u8981\\u6062\\u590D\\u8FD9 \".concat(userIds.length, \" \\u4E2A\\u7528\\u6237\\u5417\\uFF1F\"),\n        centered: true,\n        onOk: function onOk() {\n          putAction(_this3.url.putRecycleBin, {\n            userIds: userIds.join(',')\n          }).then(function (res) {\n            if (res.success) {\n              _this3.handleOk();\n\n              _this3.handleClearSelection();\n\n              _this3.$message.success(\"\\u8FD8\\u539F \".concat(userIds.length, \" \\u4E2A\\u7528\\u6237\\u6210\\u529F\\uFF01\"));\n            }\n          });\n        }\n      });\n    },\n    // 彻底删除用户\n    handleDelete: function handleDelete(userIds) {\n      var _this4 = this;\n\n      var h = this.$createElement;\n      this.$confirm({\n        title: '彻底删除用户',\n        content: h(\"div\", [h(\"p\", [\"\\u60A8\\u786E\\u5B9A\\u8981\\u5F7B\\u5E95\\u5220\\u9664\\u8FD9 \", userIds.length, \" \\u4E2A\\u7528\\u6237\\u5417\\uFF1F\"]), h(\"p\", {\n          \"style\": \"color:red;\"\n        }, [\"\\u6CE8\\u610F\\uFF1A\\u5F7B\\u5E95\\u5220\\u9664\\u540E\\u5C06\\u65E0\\u6CD5\\u6062\\u590D\\uFF0C\\u8BF7\\u8C28\\u614E\\u64CD\\u4F5C\\uFF01\"])]),\n        centered: true,\n        onOk: function onOk() {\n          var that = _this4;\n          deleteAction(that.url.deleteRecycleBin, {\n            userIds: userIds.join(',')\n          }).then(function (res) {\n            if (res.success) {\n              _this4.loadData();\n\n              _this4.handleClearSelection();\n\n              _this4.$message.success(\"\\u5F7B\\u5E95\\u5220\\u9664 \".concat(userIds.length, \" \\u4E2A\\u7528\\u6237\\u6210\\u529F\\uFF01\"));\n            } else {\n              that.$message.warning(res.message);\n            }\n          });\n        }\n      });\n    },\n    handleRevertBatch: function handleRevertBatch() {\n      this.handleRevert(this.selectedRowKeys);\n    },\n    handleDeleteBatch: function handleDeleteBatch() {\n      this.handleDelete(this.selectedRowKeys);\n    },\n    handleClearSelection: function handleClearSelection() {\n      this.handleTableSelectChange([], []);\n    },\n    handleTableSelectChange: function handleTableSelectChange(selectedRowKeys, selectionRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectionRows = selectionRows;\n    }\n  }\n};",null]}