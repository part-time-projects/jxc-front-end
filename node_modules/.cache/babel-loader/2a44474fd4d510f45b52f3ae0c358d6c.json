{"remainingRequest":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaworkspace\\jxc-front-end\\src\\views\\modules\\oss\\OSSFileList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ideaworkspace\\jxc-front-end\\src\\views\\modules\\oss\\OSSFileList.vue","mtime":1648374778130},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1648365068269},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648365135345},{"path":"D:\\ideaworkspace\\jxc-front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1648364957239}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nexport default {\n  name: \"OSSFileList\",\n  mixins: [JeecgListMixin],\n  data: function data() {\n    return {\n      description: '文件列表',\n      // 表头\n      columns: [{\n        title: '#',\n        dataIndex: '',\n        key: 'rowIndex',\n        width: 60,\n        align: \"center\",\n        customRender: function customRender(t, r, index) {\n          return parseInt(index) + 1;\n        }\n      }, {\n        title: '文件名称',\n        align: \"center\",\n        dataIndex: 'fileName'\n      }, {\n        title: '文件地址',\n        align: \"center\",\n        dataIndex: 'url'\n      }, {\n        title: '操作',\n        dataIndex: 'action',\n        align: \"center\",\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      url: {\n        upload: \"/oss/file/upload\",\n        list: \"/oss/file/list\",\n        delete: \"/oss/file/delete\",\n        minioUpload: \"/sys/upload/uploadMinio\"\n      }\n    };\n  },\n  computed: {\n    uploadAction: function uploadAction() {\n      return window._CONFIG['domianURL'] + this.url.upload;\n    },\n    minioUploadAction: function minioUploadAction() {\n      return window._CONFIG['domianURL'] + this.url.minioUpload;\n    }\n  },\n  methods: {\n    beforeUpload: function beforeUpload(file) {\n      var fileType = file.type;\n\n      if (fileType === 'image') {\n        if (fileType.indexOf('image') < 0) {\n          this.$message.warning('请上传图片');\n          return false;\n        }\n      } else if (fileType === 'file') {\n        if (fileType.indexOf('image') >= 0) {\n          this.$message.warning('请上传文件');\n          return false;\n        }\n      }\n\n      return true;\n    },\n    handleChange: function handleChange(info) {\n      if (info.file.status === 'done') {\n        if (info.file.response.success) {\n          this.loadData();\n          this.$message.success(\"\".concat(info.file.name, \" \\u4E0A\\u4F20\\u6210\\u529F!\"));\n        } else {\n          this.$message.error(\"\".concat(info.file.response.message));\n        }\n      } else if (info.file.status === 'error') {\n        this.$message.error(\"\".concat(info.file.response.message));\n      }\n    },\n    ossDelete: function ossDelete(id) {\n      var that = this;\n      that.$confirm({\n        title: \"确认删除\",\n        content: \"是否删除选中文件?\",\n        onOk: function onOk() {\n          that.handleDelete(id);\n        }\n      });\n    },\n    handlePreview: function handlePreview(record) {\n      if (record && record.url) {\n        var url = window._CONFIG['onlinePreviewDomainURL'] + '?url=' + encodeURIComponent(record.url);\n        window.open(url, '_blank');\n      }\n    }\n  }\n};",{"version":3,"sources":["OSSFileList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <!-- 查询区域 -->\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\" @keyup.enter.native=\"searchQuery\">\r\n        <a-row :gutter=\"24\">\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"文件名称\">\r\n              <a-input placeholder=\"请输入文件名称\" v-model=\"queryParam.fileName\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"文件地址\">\r\n              <a-input placeholder=\"请输入文件地址\" v-model=\"queryParam.url\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n              <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </span>\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n\r\n    <!-- 操作按钮区域 -->\r\n    <div class=\"table-operator\">\r\n      <!--      <a-button type=\"primary\" icon=\"download\" @click=\"handleExportXls('文件列表')\">导出</a-button>-->\r\n      <a-upload\r\n          name=\"file\"\r\n          :multiple=\"false\"\r\n          :action=\"uploadAction\"\r\n          :headers=\"tokenHeader\"\r\n          :showUploadList=\"false\"\r\n          :beforeUpload=\"beforeUpload\"\r\n          @change=\"handleChange\">\r\n        <a-button>\r\n          <a-icon type=\"upload\"/>\r\n          OSS文件上传\r\n        </a-button>\r\n      </a-upload>\r\n\r\n      <a-upload\r\n        name=\"file\"\r\n        :multiple=\"false\"\r\n        :action=\"minioUploadAction\"\r\n        :headers=\"tokenHeader\"\r\n        :showUploadList=\"false\"\r\n        :beforeUpload=\"beforeUpload\"\r\n        @change=\"handleChange\">\r\n        <a-button>\r\n          <a-icon type=\"upload\"/>\r\n          MINIO文件上传\r\n        </a-button>\r\n      </a-upload>\r\n    </div>\r\n\r\n    <!-- table区域-begin -->\r\n    <div>\r\n      <div class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 16px;\">\r\n        <i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a\r\n          style=\"font-weight: 600\">{{\r\n        selectedRowKeys.length }}</a>项\r\n        <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\r\n      </div>\r\n\r\n      <a-table\r\n          ref=\"table\"\r\n          size=\"middle\"\r\n          bordered\r\n          rowKey=\"id\"\r\n          :columns=\"columns\"\r\n          :dataSource=\"dataSource\"\r\n          :pagination=\"ipagination\"\r\n          :loading=\"loading\"\r\n          :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n          @change=\"handleTableChange\">\r\n\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handlePreview(record)\">预览</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click=\"ossDelete(record.id)\">删除</a>\r\n        </span>\r\n\r\n      </a-table>\r\n    </div>\r\n    <!-- table区域-end -->\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\n\r\n  export default {\r\n    name: \"OSSFileList\",\r\n    mixins: [JeecgListMixin],\r\n    data() {\r\n      return {\r\n        description: '文件列表',\r\n        // 表头\r\n        columns: [\r\n          {\r\n            title: '#',\r\n            dataIndex: '',\r\n            key: 'rowIndex',\r\n            width: 60,\r\n            align: \"center\",\r\n            customRender: function (t, r, index) {\r\n              return parseInt(index) + 1;\r\n            }\r\n          },\r\n          {\r\n            title: '文件名称',\r\n            align: \"center\",\r\n            dataIndex: 'fileName'\r\n          },\r\n          {\r\n            title: '文件地址',\r\n            align: \"center\",\r\n            dataIndex: 'url'\r\n          },\r\n          {\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots: {customRender: 'action'},\r\n          }\r\n        ],\r\n        url: {\r\n          upload: \"/oss/file/upload\",\r\n          list: \"/oss/file/list\",\r\n          delete: \"/oss/file/delete\",\r\n          minioUpload: \"/sys/upload/uploadMinio\"\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      uploadAction() {\r\n        return window._CONFIG['domianURL'] + this.url.upload;\r\n      },\r\n      minioUploadAction() {\r\n        return window._CONFIG['domianURL'] + this.url.minioUpload;\r\n      },\r\n    },\r\n    methods: {\r\n      beforeUpload(file) {\r\n        var fileType = file.type;\r\n        if (fileType === 'image') {\r\n          if (fileType.indexOf('image') < 0) {\r\n            this.$message.warning('请上传图片');\r\n            return false;\r\n          }\r\n        } else if (fileType === 'file') {\r\n          if (fileType.indexOf('image') >= 0) {\r\n            this.$message.warning('请上传文件');\r\n            return false;\r\n          }\r\n        }\r\n        return true\r\n      },\r\n      handleChange(info) {\r\n        if (info.file.status === 'done') {\r\n          if (info.file.response.success) {\r\n            this.loadData()\r\n            this.$message.success(`${info.file.name} 上传成功!`);\r\n          } else {\r\n            this.$message.error(`${info.file.response.message}`);\r\n          }\r\n        } else if (info.file.status === 'error') {\r\n          this.$message.error(`${info.file.response.message}`);\r\n        }\r\n      },\r\n      ossDelete(id) {\r\n        var that = this;\r\n        that.$confirm({\r\n          title: \"确认删除\",\r\n          content: \"是否删除选中文件?\",\r\n          onOk: function () {\r\n            that.handleDelete(id)\r\n          }\r\n        });\r\n      },\r\n      handlePreview(record) {\r\n        if (record && record.url) {\r\n          let url = window._CONFIG['onlinePreviewDomainURL'] + '?url=' + encodeURIComponent(record.url)\r\n          window.open(url, '_blank')\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  @import '~@assets/less/common.less';\r\n</style>\r\n"],"sourceRoot":"src/views/modules/oss"}]}